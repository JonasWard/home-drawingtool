(this["webpackJsonpsto-home"]=this["webpackJsonpsto-home"]||[]).push([[0],{78:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(32),a=n.n(o),s=(n(78),n(14)),c=n(17),u={test:""};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return"TEST_FULFILLED"===t.type?Object(c.a)(Object(c.a)({},e),{},{test:t.payload.data}):e},h=Object(s.b)({project:l}),d=n(57),f=n(58),p=Object(s.a)(f.a,d.a),v=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.c)(p),g=Object(s.d)(h,v),y=n(69),b=n(119),m=n(41),x=n(20),O=n(70),j="'FrutigerNext'",w="'FrutigerNextBold'",k={palette:{corporate:{yellowMain:"#ffd700",yellowDark:"#fbc300"},neutral:{black:"#333333",white:"#ffffff",grayLight:"#f7f7f7",grayMin:"#e4e3e3"}},shadows:{spreadsheet:"0 -2px 18px 0 rgba(100, 92, 82, 0.1)"}},C={fontFamily:[j,w],htmlFontSize:10,h1:{fontSize:"36px",fontFamily:w,color:k.palette.neutral.black},h2:{fontSize:"17px",fontFamily:w,color:k.palette.neutral.black},h6:{fontFamily:j,fontSize:"17px",color:k.palette.neutral.black}},E=Object(O.a)({colors:k,breakpoints:{values:{xs:0,sm:375,md:415,lg:768,xl:1024}},palette:{},typography:C,overrides:{MuiChip:{label:C.h6}}}),A=Object(c.a)(Object(c.a)({},E),{},{gridSizes:{maxWidth:"800px"},skeleton:{appBar:{height:"116px",heightExpanded:"226px",heightExpandedContent:"110px",padding:"15px 24px 20px 24px"},bottomSpreadsheet:{height:"95px",heightExpanded:"247px",heightExpandedContent:"162px",padding:"10px 24px 16px 24px"},sideSpreadsheet:{width:"438px",padding:"36px",actionsHeight:"114px"}}}),V=n(16),G=n(120),T=n(23),D=n(36),M=n(11),F=n(5);var L=function(e){return Object(F.jsx)("svg",Object(c.a)(Object(c.a)({width:34,height:9,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(F.jsx)("path",{d:"M2 7l15-5 15 5",stroke:"#DCDCDC",strokeWidth:4,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})}))},P=["classes","t","clickElement","additionalElement"];var R=Object(s.c)(Object(T.a)((function(e){return{root:{},actions:{marginTop:"17px",display:"flex",alignItems:"center"},expandIcon:{display:"flex",justifyContent:"center",width:"100%"},rotate:{transform:"rotate(180deg)"},icon:{marginRight:"6px"}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.clickElement),o=e.additionalElement,a=Object(V.a)(e,P),s=Object(r.useState)(!1),c=Object(D.a)(s,2),u=c[0],l=c[1];return Object(F.jsxs)("div",{className:t.root,children:[Object(F.jsxs)("div",{className:o?t.actions:t.expandIcon,children:[n?i.a.cloneElement(n,{onClick:function(){return l(!u)},className:u?t.rotate:""}):Object(F.jsx)(L,{onClick:function(){return l(!u)},className:Object(M.a)(t.icon,u?t.rotate:"")}),o]}),u&&a.children]})})),S=n(115),B=n(116),N=n(117),z=["textColor","background","icon","text","onClick","classes","className","fullWidth","disabled","halfWidth"];function I(e){var t=e.textColor,n=e.background,r=e.icon,o=e.text,a=e.onClick,s=e.classes,u=e.className,l=e.fullWidth,h=e.disabled,d=e.halfWidth,f=Object(V.a)(e,z),p=Object(S.a)();return t=t||p.colors.palette.neutral.black,Object(F.jsxs)(B.a,Object(c.a)(Object(c.a)({className:Object(M.a)(s.root,u),onClick:a},f),{},{disabled:h,style:{background:h?p.colors.palette.neutral.grayMin:n,width:l?"100%":d?"50%":""},children:[r?Object(F.jsx)("div",{className:s.icon,children:i.a.cloneElement(r,{stroke:t})}):null,o?Object(F.jsx)(N.a,{variant:"h2",style:{color:t,marginLeft:"7px"},children:o}):null]}))}I.defaultProps={textColor:k.palette.neutral.black,background:k.palette.corporate.yellowMain};var U=Object(T.a)((function(e){return{root:{display:"flex",borderRadius:"12px",height:"48px",backgroundColor:e.colors.palette.corporate.yellowMain,boxShadow:"0 2px 14px 0 rgba(210, 179, 13, 0.42)",border:"solid 1px rgba(255, 193, 0, 0.5)"},icon:{width:"2.4rem",height:"2.4rem",overflow:"hidden"}}}))(I),H=n(118),Z=["classes","t","title","text","content"];var K=Object(s.c)(Object(T.a)((function(e){return{root:{paddingTop:"18px",paddingBottom:"30px",boxSizing:"border-box",height:e.skeleton.bottomSpreadsheet.heightExpandedContent},content:{height:"100%"},divider:{}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.title,e.text,e.content);return Object(V.a)(e,Z),Object(F.jsxs)("div",{className:Object(M.a)(t.root),children:[Object(F.jsx)("div",{className:t.content,children:n}),Object(F.jsx)(H.a,{className:t.divider})]})})),W=n(12),Y=n.n(W),X=["classes","icon","className","onClick","disabled","background","iconColor"];function J(e){var t=e.classes,n=e.icon,r=e.className,o=e.onClick,a=e.disabled,s=(e.background,e.iconColor),u=Object(V.a)(e,X);return Object(F.jsx)(B.a,Object(c.a)(Object(c.a)({className:Object(M.a)(t.root,r),onClick:o},u),{},{disabled:a,children:n&&Object(F.jsx)("div",{className:t.icon,children:i.a.cloneElement(n,{stroke:a?k.palette.neutral.grayMin:s})})}))}J.prototype={icon:Y.a.any.isRequired,onClick:Y.a.func,iconColor:Y.a.string,background:Y.a.string},J.defaultProps={iconColor:k.palette.neutral.black,background:k.palette.neutral.white};var _=Object(T.a)((function(e){return{root:{borderRadius:"50%",width:"40px",height:"40px",border:"solid 1px "+e.colors.palette.neutral.grayMin,boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.15)"},icon:{width:"32px",height:"32px"}}}))(J);var q=function(e){return Object(F.jsx)("svg",Object(c.a)(Object(c.a)({width:32,height:32,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(F.jsxs)("g",{stroke:e.stroke||"#333",strokeWidth:2,fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("path",{d:"M7.5 10h9a8 8 0 110 16"}),Object(F.jsx)("path",{d:"M11 6l-4 4 4 4"})]})}))};var Q=function(e){return Object(F.jsx)("svg",Object(c.a)(Object(c.a)({width:32,height:32,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(F.jsxs)("g",{stroke:e.stroke||"#333",strokeWidth:2,fill:"none",fillRule:"evenodd",children:[Object(F.jsx)("path",{d:"M24 10h-9a8 8 0 100 16"}),Object(F.jsx)("path",{d:"M20.5 6l4 4-4 4"})]})}))},$=["classes","t","expandable","undoClick","redoClick"];var ee=Object(s.c)(Object(T.a)((function(e){return{root:{display:"flex",justifyContent:"space-between"}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.expandable,e.undoClick),r=e.redoClick;return Object(V.a)(e,$),Object(F.jsxs)("div",{className:t.root,children:[Object(F.jsx)(_,{icon:Object(F.jsx)(q,{}),onClick:n}),Object(F.jsx)(_,{disabled:!0,icon:Object(F.jsx)(Q,{}),onClick:r})]})})),te=["classes","t","leftComponent","rightComponent","className"];var ne=Object(s.c)(Object(T.a)((function(e){return{root:{boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"center"}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.leftComponent),r=e.rightComponent,i=e.className;return Object(V.a)(e,te),Object(F.jsxs)("div",{className:Object(M.a)(t.root,i),children:[n||Object(F.jsx)("div",{}),r||Object(F.jsx)("div",{})]})})),re=["classes","t","expandable","expandedContent"];var ie=Object(s.c)(Object(T.a)((function(e){return{root:{background:e.colors.palette.neutral.grayLight,minHeight:e.skeleton.bottomSpreadsheet.height,borderRadius:"30px 30px 0 0",boxShadow:e.colors.shadows.spreadsheet,border:"solid 1px "+e.colors.palette.neutral.grayMin,padding:e.skeleton.bottomSpreadsheet.padding,boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"absolute",bottom:0,width:"100vw"},actions:{display:"flex",justifyContent:"space-between",alignItems:"center"}}})),Object(G.a)())((function(e){var t=e.classes,n=e.t,r=e.expandable,i=e.expandedContent;return Object(V.a)(e,re),Object(F.jsxs)("div",{className:t.root,children:[r&&Object(F.jsx)(R,{children:Object(F.jsx)(K,{content:i})}),Object(F.jsx)(ne,{leftComponent:Object(F.jsx)(ee,{undoClick:function(){return console.log("undo")},redoClick:function(){return console.log("redo")}}),rightComponent:Object(F.jsx)(U,{text:n("continue"),halfWidth:!0})})]})})),oe=["classes","t","spreadsheetExpandable","expandedContent"];var ae=Object(s.c)(Object(T.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.spreadsheetExpandable),r=e.expandedContent,i=Object(V.a)(e,oe);return Object(F.jsxs)("div",{className:t.root,children:[Object(F.jsx)("div",{className:t.root,children:i.children}),Object(F.jsx)(ie,{expandable:n,expandedContent:r})]})})),se=n(66),ce=n(8);function ue(e,t,n){if(e&&t&&n){var r=e.current,i=r.clientWidth,o=r.clientHeight;n&&(n.left=i/-16,n.right=i/16,n.top=o/16,n.bottom=o/-16,n.updateProjectionMatrix()),t.setSize(i,o)}}function le(e,t,n){var r={frameId:null};return r.frameId=requestAnimationFrame((function(){return he(e,t,n,r)})),r}function he(e,t,n,r){e.clear("#ddd"),e.render(t,n),r.frameId=requestAnimationFrame((function(){return he(e,t,n,r)}))}var de=n(1),fe=n(2),pe=n(10),ve=n(3),ge=n(4),ye="change";var be=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i;Object(de.a)(this,n),(i=t.call(this)).object=e,i.domElement=void 0!==r?r:document,i.enabled=!0,i.target=new ce.v,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.25,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.enableKeys=!0,i.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},i.mouseButtons={ORBIT:ce.e.LEFT,ZOOM:ce.e.MIDDLE,PAN:ce.e.RIGHT},i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object.zoom,i.getPolarAngle=function(){return d.phi},i.getAzimuthalAngle=function(){return d.theta},i.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(a),o.update(),l=u.NONE},i.update=function(){var t=new ce.v,n=(new ce.m).setFromUnitVectors(e.up,new ce.v(0,1,0)),r=n.clone().invert(),i=new ce.v,s=new ce.m;return function(){var e=o.object.position;return t.copy(e).sub(o.target),t.applyQuaternion(n),d.setFromVector3(t),o.autoRotate&&l===u.NONE&&A(2*Math.PI/60/60*o.autoRotateSpeed),d.theta+=f.theta,d.phi+=f.phi,d.theta=Math.max(o.minAzimuthAngle,Math.min(o.maxAzimuthAngle,d.theta)),d.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(o.minDistance,Math.min(o.maxDistance,d.radius)),o.target.add(v),t.setFromSpherical(d),t.applyQuaternion(r),e.copy(o.target).add(t),o.object.lookAt(o.target),!0===o.enableDamping?(f.theta*=1-o.dampingFactor,f.phi*=1-o.dampingFactor):f.set(0,0,0),p=1,v.set(0,0,0),!!(g||i.distanceToSquared(o.object.position)>h||8*(1-s.dot(o.object.quaternion))>h)&&(o.dispatchEvent(a),i.copy(o.object.position),s.copy(o.object.quaternion),g=!1,!0)}}(),i.dispose=function(){o.domElement.removeEventListener("contextmenu",U,!1),o.domElement.removeEventListener("mousedown",L,!1),o.domElement.removeEventListener("wheel",S,!1),o.domElement.removeEventListener("touchstart",N,!1),o.domElement.removeEventListener("touchend",I,!1),o.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",R,!1),window.removeEventListener("keydown",B,!1)};var o=Object(pe.a)(i),a={type:"change"},s={type:"start"},c={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},l=u.NONE,h=1e-6,d=new ce.s,f=new ce.s,p=1,v=new ce.v,g=!1,y=new ce.u,b=new ce.u,m=new ce.u,x=new ce.u,O=new ce.u,j=new ce.u,w=new ce.u,k=new ce.u,C=new ce.u;function E(){return Math.pow(.95,o.zoomSpeed)}function A(e){f.theta-=e}function V(e){f.phi-=e}var G=function(){var e=new ce.v;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),v.add(e)}}(),T=function(){var e=new ce.v;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),v.add(e)}}(),D=function(){var e=new ce.v;return function(t,n){var r=o.domElement===document?o.domElement.body:o.domElement;if(Object.getPrototypeOf(o.object).isPerspectiveCamera){var i=o.object.position;e.copy(i).sub(o.target);var a=e.length();a*=Math.tan(o.object.fov/2*Math.PI/180),G(2*t*a/r.clientHeight,o.object.matrix),T(2*n*a/r.clientHeight,o.object.matrix)}else Object.getPrototypeOf(o.object).isOrthographicCamera?(G(t*(o.object.right-o.object.left)/o.object.zoom/r.clientWidth,o.object.matrix),T(n*(o.object.top-o.object.bottom)/o.object.zoom/r.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}}();function M(e){Object.getPrototypeOf(o.object).isPerspectiveCamera?p/=e:Object.getPrototypeOf(o.object).isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function F(e){Object.getPrototypeOf(o.object).isPerspectiveCamera?p*=e:Object.getPrototypeOf(o.object).isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function L(e){if(!1!==o.enabled){if(e.preventDefault(),e.button===o.mouseButtons.ORBIT){if(!1===o.enableRotate)return;!function(e){y.set(e.clientX,e.clientY)}(e),l=u.ROTATE}else if(e.button===o.mouseButtons.ZOOM){if(!1===o.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),l=u.DOLLY}else if(e.button===o.mouseButtons.PAN){if(!1===o.enablePan)return;!function(e){x.set(e.clientX,e.clientY)}(e),l=u.PAN}l!==u.NONE&&(document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",R,!1),o.dispatchEvent(s))}}function P(e){if(!1!==o.enabled)if(e.preventDefault(),l===u.ROTATE){if(!1===o.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),m.subVectors(b,y);var t=o.domElement===document?o.domElement.body:o.domElement;A(2*Math.PI*m.x/t.clientWidth*o.rotateSpeed),V(2*Math.PI*m.y/t.clientHeight*o.rotateSpeed),y.copy(b),o.update()}(e)}else if(l===u.DOLLY){if(!1===o.enableZoom)return;!function(e){k.set(e.clientX,e.clientY),C.subVectors(k,w),C.y>0?M(E()):C.y<0&&F(E()),w.copy(k),o.update()}(e)}else if(l===u.PAN){if(!1===o.enablePan)return;!function(e){O.set(e.clientX,e.clientY),j.subVectors(O,x),D(j.x,j.y),x.copy(O),o.update()}(e)}}function R(e){!1!==o.enabled&&(document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",R,!1),o.dispatchEvent(c),l=u.NONE)}function S(e){!1===o.enabled||!1===o.enableZoom||l!==u.NONE&&l!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?F(E()):e.deltaY>0&&M(E()),o.update()}(e),o.dispatchEvent(s),o.dispatchEvent(c))}function B(e){!1!==o.enabled&&!1!==o.enableKeys&&!1!==o.enablePan&&function(e){switch(e.keyCode){case o.keys.UP:D(0,o.keyPanSpeed),o.update();break;case o.keys.BOTTOM:D(0,-o.keyPanSpeed),o.update();break;case o.keys.LEFT:D(o.keyPanSpeed,0),o.update();break;case o.keys.RIGHT:D(-o.keyPanSpeed,0),o.update()}}(e)}function N(e){if(!1!==o.enabled){switch(e.touches.length){case 3:if(!1===o.enableRotate)return;!function(e){y.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=u.TOUCH_ROTATE;break;case 2:if(!1===o.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);w.set(0,r)}(e),l=u.TOUCH_DOLLY;break;case 1:if(!1===o.enablePan)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=u.TOUCH_PAN;break;default:l=u.NONE}l!==u.NONE&&o.dispatchEvent(s)}}function z(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 3:if(!1===o.enableRotate)return;if(l!==u.TOUCH_ROTATE)return;!function(e){b.set(e.touches[0].pageX,e.touches[0].pageY),m.subVectors(b,y);var t=o.domElement===document?o.domElement.body:o.domElement;A(2*Math.PI*m.x/t.clientWidth*o.rotateSpeed),V(2*Math.PI*m.y/t.clientHeight*o.rotateSpeed),y.copy(b),o.update()}(e);break;case 2:if(!1===o.enableZoom)return;if(l!==u.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);k.set(0,r),C.subVectors(k,w),C.y>0?F(E()):C.y<0&&M(E()),w.copy(k),o.update()}(e);break;case 1:if(!1===o.enablePan)return;if(l!==u.TOUCH_PAN)return;!function(e){O.set(e.touches[0].pageX,e.touches[0].pageY),j.subVectors(O,x),D(j.x,j.y),x.copy(O),o.update()}(e);break;default:l=u.NONE}}function I(e){!1!==o.enabled&&(o.dispatchEvent(c),l=u.NONE)}function U(e){e.preventDefault()}return o.domElement.addEventListener("contextmenu",U,!1),o.domElement.addEventListener("mousedown",L,!1),o.domElement.addEventListener("wheel",S,!1),o.domElement.addEventListener("touchstart",N,!1),o.domElement.addEventListener("touchend",I,!1),o.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",B,!1),i.update(),i}return Object(fe.a)(n,[{key:"center",get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},{key:"noZoom",get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},{key:"noRotate",get:function(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},{key:"noPan",get:function(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},{key:"noKeys",get:function(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},{key:"staticMoving",get:function(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},{key:"dynamicDampingFactor",get:function(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}]),n}(ce.c),me=n.p+"static/media/Background.9e682f80.jpg",xe="background";var Oe="background",je="default",we="selectionArea",ke="green",Ce="cyan",Ee="blue",Ae="pink",Ve="black",Ge="white",Te="orange",De="transparent",Me="#ff00ff",Fe="#1aae19",Le="#08eafc",Pe="#ff00ff",Re="#000000",Se="#ff7500",Be="#ffffff",Ne="#b0b0b0",ze={background:new ce.i({map:function(e){var t=new ce.t;if(e===xe)return t.load(me,(function(e){e.wrapS=e.wrapT=ce.o,e.offset.set(0,0),e.repeat.set(75,75)}))}(xe)}),transparent:new ce.i({name:De,visible:!1}),selectionArea:new ce.i({name:we,color:Ne,transparent:!0,opacity:.3}),pink:new ce.i({name:Ae,color:Pe}),white:new ce.i({name:Ge,color:Be}),black:new ce.i({name:Ve,color:Re}),green:new ce.i({name:ke,color:Fe}),cyan:new ce.i({name:Ce,color:Le}),blue:new ce.i({name:Ee,color:Ee}),orange:new ce.i({name:Te,color:Se}),default:new ce.i({name:je,color:Me,visible:!0,depthWrite:!0})};function Ie(e){return ze[e]}function Ue(e){var t=new ce.p,n=function(){var e=new ce.w({antialias:!0});return e.setClearColor("#cdd0d6"),e.setPixelRatio(window.devicePixelRatio),e}();e.current.appendChild(n.domElement);var r=function(e){var t=e.clientWidth,n=e.clientHeight,r=new ce.j(t/-16,t/16,n/16,n/-16,-1,100);return r.enableRotate=!1,r.position.z=20,r}(e.current);t.add(r);var i=new ce.n(new ce.v(0,0,20),new ce.v(0,0,-1),0,100),o=function(e,t){var n=new be(e,t.domElement);return n.enableRotate=!1,n.enableKeys=!1,n.minZoom=.5,n.maxZoom=8,n.mouseButtons={ZOOM:ce.e.MIDDLE,PAN:ce.e.RIGHT},n.target.set(0,0),n.update(),n}(r,n);return function(e){var t=new ce.l(2e3,2e3),n=Ie(Oe),r=new ce.h(t,n);r.name="background",r.position.set(0,0,-1),e.add(r)}(t),function(e){var t=new ce.l(2e3,2e3),n=Ie(De),r=new ce.h(t,n);r.name="catchPlane",r.position.set(0,0,-.9),e.add(r)}(t),ue(e,n,r),{scene:t,renderer:n,camera:r,frameId:le(n,t,r),raycaster:i,orbitControls:o}}function He(e,t,n){!function(e){var t=e.frameId;cancelAnimationFrame(t)}(n.frameId),e.removeChild(t.domElement)}var Ze="mousedown",Ke="mousemove",We="mouseup";function Ye(e,t,n,r){t&&e.addEventListener(Ze,t,!0),n&&e.addEventListener(Ke,n,!0),r&&e.addEventListener(We,r,!0)}var Xe="keydown",Je="keyup";function _e(e,t){e&&document.addEventListener(Xe,e,!0),t&&document.addEventListener(Je,t,!0)}var qe="Digit1",Qe="Digit2",$e="Digit3",et="Digit4",tt="Digit5",nt="Digit6",rt="Backspace",it="Escape",ot="Enter",at="Space",st="AltLeft",ct="ControlLeft",ut="MetaLeft",lt="ArrowLeft",ht="ArrowRight",dt="ArrowUp",ft="ArrowDown",pt="F12",vt="KeyA",gt="KeyI",yt="KeyS",bt={select:"select",outline:"outline",wall:"wall",door:"door",window:"window",graph:"graph",magicGuideLine:"magicGuideLine"},mt="onLeftMouseDown",xt="onLeftMouseDoubleClick",Ot="onRightMouseDown",jt="onRightMouseDoubleClick",wt="onLeftMouseUp",kt="onMouseMove",Ct="onBackspaceDown",Et="onEnterDown",At="onEscapeDown",Vt="onArrowLeftDown",Gt="onArrowRightDown",Tt="onArrowUpDown",Dt="onArrowDownDown",Mt="onKeyADown",Ft=function(){function e(t,n,r){Object(de.a)(this,e),this.floorPlanerController=t,this.representationType=n,this.group=r}return Object(fe.a)(e,[{key:"removeGeometryFromGroup",value:function(e,t){e.dispose(),this.group&&this.group.remove(e),this.removeGeometryFromCurrentGeometries(e,t)}},{key:"removeGeometryFromCurrentGeometries",value:function(e,t){if(t.includes(e)){var n=t.findIndex((function(t){return t.uuid===e.uuid}));t.splice(n,1)}}}]),e}(),Lt="vertexGroup",Pt="vertex",Rt="edgeGroup",St="edge",Bt="face",Nt="geometry",zt="polygon",It="polyline",Ut="stamp",Ht="offsetFace",Zt={vertex:{innerActiveMaterial:Ie(Te),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(Te),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3,innerSegments:32,outerSegments:32},edge:{innerActiveMaterial:Ie(Te),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(De),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3},properties:{offsetLeft:.2,offsetRight:.2}},Kt=new Map;function Wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=(e/2).toFixed(2);if(Kt.has(n))return Kt.get(n);var r=new ce.b(n,t);return Kt.set(n,r),r}var Yt=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0;Object(de.a)(this,n),e=e||1;var a=Xt(i),s=Wt(a.innerSize*e,a.innerSegments),c=Wt(a.outerSize*e,a.outerSegments);(r=t.call(this,c,a.outerInactiveMaterial)).callbacks=[];var u=new ce.h(s,a.innerInactiveMaterial);return u.name="innerVertex",u.position.z-=.001,r.add(u),o&&r.position.set(o.x,o.y),r.geometryType=Pt,r.config=a,r.name="outerVertex",r.edges=[],r}return Object(fe.a)(n,[{key:"addEdge",value:function(e){this.edges.includes(e)||this.edges.push(e)}},{key:"removeEdge",value:function(e){var t=this.edges.indexOf(e);this.edges.splice(t,1)}},{key:"getEdges",value:function(){return this.edges}},{key:"updateScale",value:function(e){this.scale.set(e,e)}},{key:"moveDelta",value:function(e){this.position.x+=e.x,this.position.y+=e.y}},{key:"setActive",value:function(e){this.material=e?this.config.outerActiveMaterial:this.config.outerInactiveMaterial,this.children[0].material=e?this.config.innerActiveMaterial:this.config.innerInactiveMaterial}},{key:"getGeometry",value:function(){for(var e=this;e.parent;){if(e.rootGeometry)return e;e=e.parent}return null}},{key:"dispose",value:function(){this.callbacks.forEach((function(e){return e()}))}},{key:"subscribe",value:function(e){this.callbacks.includes(e)||this.callbacks.push(e)}},{key:"unsubscribe",value:function(e){this.callbacks=this.callbacks.filter((function(t){return t!==e}))}}]),n}(ce.h);function Xt(e){return e===bt.outline?Zt.vertex:{innerActiveMaterial:Ie(Ee),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(Ee),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3,innerSegments:32,outerSegments:32}}var Jt={vertex:{innerActiveMaterial:Ie(Ae),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(Ae),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3,innerSegments:32,outerSegments:32},edge:{innerActiveMaterial:Ie(Ae),innerInactiveMaterial:Ie(Ae),outerActiveMaterial:Ie(De),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3}},_t={vertex:{innerActiveMaterial:Ie(Ee),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(Ee),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3,innerSegments:32,outerSegments:32},edge:{innerActiveMaterial:Ie(Ee),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(De),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3},properties:{offsetLeft:0,offsetRight:.2}},qt={vertex:{innerActiveMaterial:Ie(Ee),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(Ee),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3,innerSegments:32,outerSegments:32},edge:{innerActiveMaterial:Ie(Te),innerInactiveMaterial:Ie(Te),outerActiveMaterial:Ie(De),outerInactiveMaterial:Ie(De),innerSize:.1,outerSize:.3},properties:{}},Qt={edge:{innerActiveMaterial:Ie(De),innerInactiveMaterial:Ie(De),outerActiveMaterial:Ie(Ae),outerInactiveMaterial:Ie(De),innerSize:.05,outerSize:.05}},$t=new Map;function en(e,t){var n,r;return $t.has(e)?n=$t.get(e):(n=new ce.l(e,1),$t.set(e,n)),$t.has(t)?r=$t.get(t):(r=new ce.l(t,1),$t.set(t,r)),{innerGeometry:n,outerGeometry:r}}var tn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(de.a)(this,n),i=i||1;var c=nn(o),u=en(c.innerSize,c.outerSize),l=u.innerGeometry,h=u.outerGeometry;(a=t.call(this,h,c.outerInactiveMaterial)).vertices=[],a.callbacks=[];var d=new ce.h(l,c.innerInactiveMaterial);return d.name="innerEdge",d.position.z-=.001,a.update(e.position,r.position),a.add(d),a.uuid=s||a.uuid,e.addEdge(Object(pe.a)(a)),r.addEdge(Object(pe.a)(a)),a.scale.x=i,a.geometryType=St,a.config=c,a.vertices=[e,r],a.name="outerEdge",a}return Object(fe.a)(n,[{key:"update",value:function(e,t){var n=this,r=new ce.u(e.x,e.y),i=new ce.u(t.x,t.y),o=i.clone().sub(r),a=r.distanceTo(i),s=r.clone().addScaledVector(o,.5);this.position.set(s.x,s.y),this.scale.y=a;var c=o.angle();this.rotation.z=0,this.rotateZ(c+Math.PI/2),this.callbacks.forEach((function(e){return e(n)}))}},{key:"updateEdgeCallback",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e)}))}},{key:"setActive",value:function(e){this.material=e?this.config.outerActiveMaterial:this.config.outerInactiveMaterial,this.children[0].material=e?this.config.innerActiveMaterial:this.config.innerInactiveMaterial}},{key:"updateScale",value:function(e){this.scale.x=e}},{key:"getVertices",value:function(){return this.vertices}},{key:"getAngle",value:function(){if(!this.parent||this.parent.geometryType!==Rt)return 0;var e=this.vertices;if(2!==e.length)return 0;var t=e[0].position.clone().sub(e[1].position);return new ce.u(t.x,t.y).angle()}},{key:"getLength",value:function(){var e=this.vertices;if(2===e.length)return e[0].position.distanceTo(e[1].position)}},{key:"getNearestPositionOnEdge",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.parent||!this.parent.findVerticesByUuids)return e;var n=this.vertices;if(2!==n.length)return e;var r=n[0].position,i=r.x,o=r.y,a=n[1].position,s=a.x,c=a.y,u=new ce.u(e.x-i,e.y-o),l=new ce.u(s-i,c-o),h=l.length(),d=u.dot(l)/h;d>0&&d>h?d=h:d<0&&d<h&&(d=0),l.normalize();var f=new ce.u(i+l.x*d,o+l.y*d);if(t&&this.parent.parent&&this.parent.parent.getOffsets){var p=this.parent.parent.getOffsets(),v=p.offsetLeft,g=p.offsetRight,y=this.parent.parent.isClockwise?(g-v)/2:(v-g)/2;f=l.multiplyScalar(y).add(f).rotateAround(f,ce.f.degToRad(90))}return f}},{key:"getDistanceToEdge",value:function(e){return this.parent&&this.parent.findVerticesByUuids?this.getNearestPositionOnEdge(e,!1).distanceTo(e):Number.MAX_VALUE}},{key:"getDirectionFromVertex",value:function(e){var t=this.vertices;if(2!==t.length)return new ce.u;var n=t.find((function(t){return t!==e}));return new ce.u(n.position.x-e.position.x,n.position.y-e.position.y)}},{key:"isConnectToVertex",value:function(e){return this.getVertices().includes(e)}},{key:"getGeometry",value:function(){for(var e=this;e.parent;){if(e.rootGeometry)return e;e=e.parent}return null}},{key:"dispose",value:function(){this.callbacks.forEach((function(e){return e()}))}},{key:"subscribe",value:function(e){this.callbacks.includes(e)||this.callbacks.push(e)}},{key:"unsubscribe",value:function(e){this.callbacks=this.callbacks.filter((function(t){return t!==e}))}}]),n}(ce.h);function nn(e){switch(e){case bt.outline:return Zt.edge;case bt.magicGuideLine:return Qt.edge;case bt.wall:return _t.edge;case bt.graph:return Jt.edge;default:return qt.edge}}var rn=null,on="vertical",an="horizontal",sn="verHor",cn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r;Object(de.a)(this,n),(r=t.call(this)).representationType="magicGuideLine";var i=new Yt(1,r.representationType,{x:1e5,y:0,z:0}),o=new Yt(1,r.representationType,{x:-1e5,y:0,z:0});r.vertical=new tn(i,o,1,r.representationType),r.vertical.name="verticalMagicGuideLine",r.vertical.setActive(!1),r.add(r.vertical);var a=new Yt(1,r.representationType,{x:0,y:1e5,z:0}),s=new Yt(1,r.representationType,{x:0,y:-1e5,z:0});return r.horizontal=new tn(a,s,1,r.representationType),r.horizontal.name="horizontalMagicGuideLine",r.horizontal.setActive(!1),r.add(r.horizontal),e.add(Object(pe.a)(r)),r.name="magicGuideLines",rn=Object(pe.a)(r),r}return Object(fe.a)(n,[{key:"updateVertical",value:function(e){this.vertical.update({x:e.x,y:1e5,z:0},{x:e.x,y:-1e5,z:0}),this.vertical.setActive(!0)}},{key:"updateHorizontal",value:function(e){this.horizontal.update({x:1e5,y:e.y,z:0},{x:-1e5,y:e.y,z:0}),this.horizontal.setActive(!0)}},{key:"setOrientation",value:function(e,t){switch(e){case on:this.updateVertical(t),this.horizontal.setActive(!1);break;case an:this.vertical.setActive(!1),this.updateHorizontal(t);break;case sn:this.updateVertical(t),this.updateHorizontal(t);break;default:this.vertical.setActive(!1),this.horizontal.setActive(!1)}}},{key:"updateScale",value:function(e){this.vertical.updateScale(e),this.horizontal.updateScale(e)}}]),n}(ce.d);function un(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;return r&&(e.ctrlKey||e.metaKey)?t:r||e.ctrlKey||e.metaKey?ln(t,n,i):t}function ln(e,t,n){var r=Number.MAX_VALUE,i=null,o=Number.MAX_VALUE,a=null,s=null;return t.forEach((function(t){var n=Math.abs(e.x-t.x);n<r&&(r=n,i=t);var s=Math.abs(e.y-t.y);s<o&&(o=s,a=t)})),a&&o<n&&Math.abs(a.y-e.y)<n&&(e.y=a.y,s=an),i&&r<n&&Math.abs(i.x-e.x)<n&&(e.x=i.x,s=s?sn:on),rn&&rn.setOrientation(s,e),e}var hn=null,dn=[bt.outline,bt.wall,bt.graph],fn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r;return Object(de.a)(this,n),r=t.call(this),e.add(Object(pe.a)(r)),r.name="previewVertex",r.position.z=.02,hn=Object(pe.a)(r),r}return Object(fe.a)(n,[{key:"setRepresentationType",value:function(e){this.config=Xt(e)}}]),n}(Yt);function pn(e,t){dn.includes(t)?(hn.position.set(e.x,e.y),hn.setRepresentationType(t),hn.setActive(!0)):hn.setActive(!1)}var vn=n(7),gn=n(6);function yn(e,t,n){var r=e.children;return e.children=[],r.splice(n,0,t),r.forEach((function(t){return e.add(t)})),e}function bn(e,t){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];t.add(r),e.remove(r)}}var mn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r;return Object(de.a)(this,n),(r=t.call(this)).name="vertexGroup",r.currentScale=1,r.geometryType=Lt,r.position.z=.03,e.add(Object(pe.a)(r)),r}return Object(fe.a)(n,[{key:"setEdgeGroup",value:function(e){this.edgeGroup=e}},{key:"addVertex",value:function(e){var t=new Yt(this.currentScale,this.getRepresentationType(),e);return t.setActive(!0),this.add(t),t}},{key:"addVertexAtIndex",value:function(e,t){var n=new Yt(this.currentScale,this.getRepresentationType(),e);return yn(this,n,t),n}},{key:"updateVertex",value:function(e,t){var n=this;e.position.set(t.x,t.y),e.getEdges().forEach((function(e){n.edgeGroup.updateEdge(e)}))}},{key:"moveDeltaAllVertices",value:function(e){return this.children.forEach((function(t){return t.moveDelta(e)})),!!this.edgeGroup&&(this.edgeGroup.updateAllEdges(),!0)}},{key:"removeVertex",value:function(e){var t=this;e.getEdges().forEach((function(e){return t.edgeGroup.removeEdge(e)})),this.remove(e)}},{key:"findVertexByUuid",value:function(e){return this.children.find((function(t){return t.uuid===e}))}},{key:"findVerticesByUuids",value:function(e){var t=this,n=[];return e.forEach((function(e){return n.push(t.children.find((function(t){return t.uuid===e})))})),n}},{key:"getVertexByIndex",value:function(e){return this.children.length?this.children[(e+this.children.length)%this.children.length]:null}},{key:"getPositionFromVertex",value:function(e){var t=this.findVertexByUuid(e);return t?t.position:t}},{key:"getPositions",value:function(){return this.getVertices().map((function(e){return e.position}))}},{key:"getRepresentationType",value:function(){if(this.parent&&this.parent.representationType)return this.parent.representationType}},{key:"updateScale",value:function(e){this.children.forEach((function(t){return t.updateScale(e)})),this.currentScale=e}},{key:"setActive",value:function(e){this.children.forEach((function(t){return t.setActive(e)}))}},{key:"setVertexOrder",value:function(e,t){var n=this;t=(t=(t+this.children.length)%this.children.length)>this.children.length?this.children.length-1:t,this.remove(e);var r=this.children;this.children=[],r.splice(t,0,e),r.forEach((function(e){return n.add(e)}))}},{key:"getCount",value:function(){return this.children.length}},{key:"getVertices",value:function(){if(this.children.filter((function(e){return e.getEdges().length>2})).length||!this.edgeGroup||!this.edgeGroup.children.length)return this.children;var e=[],t=this.children.find((function(e){return 1===e.getEdges().length})),n=(t=t?t.getEdges()[0]:this.edgeGroup.children[0]).getVertices();e.push(n[0]),e.push(n[1]);for(var r=n[1],i=!1;e.length!==this.children.length&&!i;){var o=this.edgeGroup.children.find((function(t){return t.getVertices().includes(r)&&(!e.includes(t.getVertices()[0])&&e.includes(t.getVertices()[1])||e.includes(t.getVertices()[0])&&!e.includes(t.getVertices()[1]))}));o?(r=o.getVertices().find((function(e){return e!==r})),e.push(r)):i=!0}return e}},{key:"dispose",value:function(){this.children.forEach((function(e){return e.dispose()}))}},{key:"fromJSON",value:function(e){var t=this;e.forEach((function(e){var n=new Yt(t.currentScale,t.getRepresentationType(),e);n.uuid=e.uuid,t.add(n)}))}},{key:"toJSON",value:function(){var e=[];return this.children.forEach((function(t){var n=t.position,r=n.x,i=n.y,o=n.z;e.push({uuid:t.uuid,x:r,y:i,z:o})})),e}}]),n}(ce.d),xn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i;return Object(de.a)(this,n),(i=t.call(this)).name="edgeGroup",i.currentScale=1,i.geometryType=Rt,i.position.z=.02,i.vertexGroup=r,e.add(Object(pe.a)(i)),i}return Object(fe.a)(n,[{key:"addEdge",value:function(e,t){var n=new tn(e,t,this.currentScale,this.getRepresentationType());n.setActive(!0),this.add(n)}},{key:"addEdgeAtIndex",value:function(e,t,n){var r=new tn(e,t,this.currentScale,this.getRepresentationType());r.setActive(!0),yn(this,r,n)}},{key:"addVertexToEdge",value:function(e,t){var n=e.getVertices();if(2===n.length){var r=this.vertexGroup.addVertex(t);r.setActive(!0);var i=new tn(n[0],r,this.currentScale,this.getRepresentationType());i.setActive(!0),this.add(i);var o=new tn(r,n[1],this.currentScale,this.getRepresentationType());return o.setActive(!0),this.add(o),this.removeEdge(e),r}}},{key:"removeEdge",value:function(e){e.getVertices().forEach((function(t){t.removeEdge(e)})),e.dispose(),this.remove(e)}},{key:"removeEdges",value:function(e){var t=this;e.forEach((function(e){return t.removeEdge(e)}))}},{key:"updateEdge",value:function(e){var t=e.getVertices();2===t.length&&e.update(t[0].position,t[1].position)}},{key:"getRepresentationType",value:function(){if(this.parent&&this.parent.representationType)return this.parent.representationType}},{key:"updateAllEdges",value:function(){var e=this;this.children.forEach((function(t){return e.updateEdge(t)}))}},{key:"updateAllEdgesCallbacks",value:function(){this.children.forEach((function(e){return e.updateEdgeCallback()}))}},{key:"updateScale",value:function(e){this.children.forEach((function(t){return t.updateScale(e)})),this.currentScale=e}},{key:"setActive",value:function(e){this.children.forEach((function(t){return t.setActive(e)}))}},{key:"getNearestEdgeToPosition",value:function(e){var t=Number.MAX_VALUE,n=null;return this.children.forEach((function(r){var i=r.getDistanceToEdge(e);i<t&&(t=i,n=r)})),n}},{key:"findEdgeByUuid",value:function(e){return this.children.find((function(t){return t.uuid===e}))}},{key:"findVerticesByUuids",value:function(e){return this.vertexGroup.findVerticesByUuids(e)}},{key:"getEdges",value:function(){return this.children.flat()}},{key:"getEdgeByIndex",value:function(e){return this.children.length?this.children[(e+this.children.length)%this.children.length]:null}},{key:"dispose",value:function(){this.children.forEach((function(e){return e.dispose()}))}},{key:"fromJSON",value:function(e){var t=this;e.forEach((function(e){var n=t.vertexGroup.findVertexByUuid(e.startVertex),r=t.vertexGroup.findVertexByUuid(e.endVertex),i=new tn(n,r,t.currentScale,t.getRepresentationType(),e.uuid);t.add(i)}))}},{key:"toJSON",value:function(){var e=[];return this.children.forEach((function(t){var n=t.getVertices();e.push({uuid:t.uuid,startVertex:n[0].uuid,endVertex:n[1].uuid})})),e}}]),n}(ce.d),On={idle:"idle",select:"select"},jn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(de.a)(this,n),(i=t.call(this)).representationType=r,i.vertexGroup=new mn(Object(pe.a)(i)),i.edgeGroup=new xn(Object(pe.a)(i),i.vertexGroup),i.vertexGroup.setEdgeGroup(i.edgeGroup),i.currentScale=1,i.active=!1,i.geometryType=Nt,i.rootGeometry=!0,i.actions=Object.assign(On,o),e.add(Object(pe.a)(i)),i}return Object(fe.a)(n,[{key:"updateScale",value:function(e){this.vertexGroup.updateScale(e),this.edgeGroup.updateScale(e),this.currentScale=e}},{key:"setAction",value:function(e){this.currentAction=e}},{key:"getAction",value:function(){return this.currentAction}},{key:"setActive",value:function(e){this.active=e,this.vertexGroup.setActive(e),this.edgeGroup&&this.edgeGroup.setActive(e),this.setAction(e?this.actions.select:this.actions.idle)}},{key:"isActive",value:function(){return this.active}},{key:"getVertices",value:function(){return this.vertexGroup.getVertices()}},{key:"getVerticesPositions",value:function(){return this.vertexGroup.children.map((function(e){return e.position}))}},{key:"getEdges",value:function(){return this.edgeGroup.getEdges()}},{key:"dispose",value:function(){this.vertexGroup.dispose(),this.edgeGroup.dispose()}},{key:"toJSON",value:function(){var e={uuid:this.uuid,geometryType:this.geometryType,representationType:this.representationType,isValidate:!1,errors:[],properties:this.properties},t=this.vertexGroup.toJSON();t.length&&(e.vertices=t);var n=this.edgeGroup.toJSON();return n.length&&(e.edges=n),e}},{key:"fromJSON",value:function(e){this.uuid=e.uuid,this.geometryType=e.geometryType,this.representationType=e.representationType,this.properties=e.properties,e.vertices&&this.vertexGroup.fromJSON(e.vertices),e.edges&&this.edgeGroup.fromJSON(e.edges)}}]),n}(ce.d);function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new ce.q;if(e&&e.length){n.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)n.lineTo(e[r].x,e[r].y);return t&&t.length&&t.forEach((function(e){var t=new ce.k;t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);n.holes.push(t)})),new ce.r(n)}}var kn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(de.a)(this,n);var a=Cn(e),s=wn(r,o);return(i=t.call(this,s,a.inactiveMaterial)).position.z=.01,i.geometryType=Bt,i.config=a,i}return Object(fe.a)(n,[{key:"setActive",value:function(e){this.material=e?this.config.activeMaterial:this.config.inactiveMaterial}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.dispose(),this.geometry=wn(e,t)}},{key:"moveDelta",value:function(e){0!==e.lengthSq()&&(this.position.x+=e.x,this.position.y+=e.y)}},{key:"dispose",value:function(){this.geometry.dispose()}}]),n}(ce.h);function Cn(e){switch(e){case bt.outline:return{activeMaterial:Ie(De),inactiveMaterial:Ie(De)};case bt.door:return{activeMaterial:Ie(Ae),inactiveMaterial:Ie(ke)};case bt.window:return{activeMaterial:Ie(Ce),inactiveMaterial:Ie(De)};default:return{activeMaterial:Ie(Ae),inactiveMaterial:Ie(De)}}}var En=function(){var e=new ce.q;return e.moveTo(-.4,-.1),e.lineTo(-.4,-.8),e.absarc(-.4,-.1,.8,-Math.PI/2,0,!1),e.absarc(-.4,-.1,.78,0,354/360*(-Math.PI/2),!0),e.lineTo(-.38,-.1),new ce.r(e)}();function An(e){for(var t=0,n=0;n<e.length-1;n++)t+=Vn(e[n],e[n+1]);return(t+=Vn(e[e.length-1],e[0]))>=0}function Vn(e,t){return(t.x-e.x)*(t.y+e.y)}function Gn(e,t){var n=[];return n.push({x:-e/2,y:t/2}),n.push({x:e/2,y:t/2}),n.push({x:e/2,y:-t/2}),n.push({x:-e/2,y:-t/2}),n}var Tn={drag:"drag"},Dn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(de.a)(this,n),(i=t.call(this,e,r,Object.assign(Tn,o))).config=Mn(r),i.setActive(!0),i.setAction(i.actions.idle),i}return Object(fe.a)(n,[{key:"updateStamp",value:function(e,t,n){var r=Gn(this.config.width,this.config.depth);this.face=new kn(e,r),this.face.rotation.z=0,this.face.position.z=.03,this.face.setActive(!0),this.add(this.face),this.config.deco&&this.config.deco.length&&this.setDecorationMeshes(this.config.deco),n&&this.face.rotateZ(n),t&&this.position.set(t.x,t.y),this.representationType=e}},{key:"setDecorationMeshes",value:function(e){var t=this;e.forEach((function(e){var n=e.geometry,r=e.material,i=new ce.h(n,r);t.face.add(i)}))}},{key:"moveDelta",value:function(e){0!==e.lengthSq()&&this.face.moveDelta(e)}},{key:"setActive",value:function(e){this.face&&(this.face.setActive(e),this.face.children.forEach((function(t){return t.visible=e}))),this.setAction(e?this.actions.select:this.actions.idle)}}]),n}(jn);function Mn(e){return e===bt.door?{width:.9,depth:.2,deco:[{geometry:En,material:Ie(Ve)}]}:{width:.9,depth:.2}}var Fn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r;Object(de.a)(this,n),r=t.call(this,e);var i=Mn();return r.name="previewStamp",r.config=i,Object(pe.a)(r),r}return Object(fe.a)(n,[{key:"updateScale",value:function(e){this.scale.y=e}},{key:"updateStamp",value:function(e,t,r){this.face&&(!function(e){for(var t=e.children.length-1;t>=0;t--)e.remove(e.children[t])}(this.face),this.face.dispose(),this.remove(this.face)),Object(vn.a)(Object(gn.a)(n.prototype),"updateStamp",this).call(this,e,t,r)}},{key:"updateDepth",value:function(e){this.config.depth!==e&&(this.config.depth=e,this.updateStamp(this.representationType))}},{key:"updatePosition",value:function(e){this.position.set(e.x,e.y)}},{key:"updateRotation",value:function(e){this.face&&(this.face.rotation.z=0,this.face.rotateZ(e))}}]),n}(Dn);var Ln={resize:"resize"},Pn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i;return Object(de.a)(this,n),(i=t.call(this,e,r,Ln)).updateEdgeCallback=function(e){e?e===i.referenceEdge&&i.referenceEdge&&i.referenceVertex&&i.updateGeometry():i.tryReconnectToParentGeometry()},i.geometryType=Ut,i.properties={width:1},i}return Object(fe.a)(n,[{key:"setReferenceEdge",value:function(e){if(this.referenceEdge&&this.referenceEdge.unsubscribe(this.updateEdgeCallback),this.referenceEdge=e,this.referenceEdge&&this.referenceEdge.subscribe(this.updateEdgeCallback),this.properties.referenceEdge=this.referenceEdge?this.referenceEdge.uuid:this.referenceEdge,this.referenceEdge&&(!this.referenceVertex||!this.referenceEdge.isConnectToVertex(this.referenceVertex))){var t=this.referenceEdge.getVertices();this.setReferenceVertex(t[0])}}},{key:"setReferenceVertex",value:function(e){this.referenceVertex=e,this.properties.referenceVertex=this.referenceVertex?this.referenceVertex.uuid:this.referenceVertex}},{key:"updateReferenceEdge",value:function(e,t){this.setReferenceEdge(e),e?(this.properties.absolute=t.distanceTo(this.referenceVertex.position),this.properties.relative=this.properties.absolute/this.referenceEdge.getLength(),this.updateGeometry()):this.updateGeometry(t)}},{key:"addWidth",value:function(e){this.properties.width=this.properties.width+e>.5?this.properties.width+e:.5,this.properties.width=this.properties.width<this.referenceEdge.getLength()?this.properties.width:this.referenceEdge.getLength(),this.updateGeometry()}},{key:"move",value:function(e){if(this.properties.relative){var t=this.properties.relative*this.referenceEdge.getLength()+e;t=(t=t>0?t:0)<this.referenceEdge.getLength()?t:this.referenceEdge.getLength(),this.properties.relative=t/this.referenceEdge.getLength()}else this.properties.absolute&&(this.properties.absolute+=e,this.properties.absolute=this.properties.absolute>0?this.properties.absolute:0,this.properties.absolute=this.properties.absolute<this.referenceEdge.getLength()?this.properties.absolute:this.referenceEdge.getLength());this.updateGeometry()}},{key:"setActive",value:function(e){this.face&&this.face.setActive(e),this.setAction(e?this.actions.select:this.actions.idle)}},{key:"tryReconnectToParentGeometry",value:function(){var e=this,t=Number.MAX_VALUE,n=null;this.referenceEdge.parent.children.filter((function(t){return t!==e.referenceEdge})).forEach((function(r){var i=r.getDistanceToEdge(e.position);i<t&&(t=i,n=r)})),n&&t<1?(this.setReferenceEdge(n),this.updateReferenceEdge(n,this.position)):this.parent.remove(this)}},{key:"dispose",value:function(){Object(vn.a)(Object(gn.a)(n.prototype),"dispose",this).call(this),this.face&&this.face.geometry.dispose(),this.referenceEdge&&this.referenceEdge.unsubscribe(this.updateEdgeCallback)}},{key:"fromJSON",value:function(e){Object(vn.a)(Object(gn.a)(n.prototype),"fromJSON",this).call(this,e),this.updateGeometry()}},{key:"updateGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.properties.depth,n=0;if(this.referenceEdge&&this.referenceVertex){var r=this.referenceEdge.getDirectionFromVertex(this.referenceVertex);this.properties.absolute?r.normalize().multiplyScalar(this.properties.absolute):r.multiplyScalar(this.properties.relative?this.properties.relative:.5),e=this.referenceVertex.position.clone().add(r),e=this.referenceEdge.getNearestPositionOnEdge(e),n=this.referenceEdge.getAngle(),t=this.referenceEdge.getGeometry().getOffset()}var i=Gn(this.properties.width,t);this.face?(this.face.geometry.dispose(),this.face.geometry=wn(i)):(this.face=new kn(this.representationType,i),this.add(this.face)),this.face.rotation.z=0,this.face.rotateZ(n),e&&this.position.set(e.x,e.y)}}]),n}(Dn);var Rn=null,Sn=[bt.door,bt.window],Bn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r;Object(de.a)(this,n),r=t.call(this,e),Rn=Object(pe.a)(r);var i=bt.door===bt.door?{width:.9,depth:.2}:{width:1,depth:.2};return r.properties={width:i.width,depth:i.depth},r}return n}(Pn);function Nn(e,t,n){Sn.includes(t)?(Rn.setActive(!0),Rn.updateReferenceEdge(n,e)):Rn.setActive(!1)}var zn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e){var r;return Object(de.a)(this,n),(r=t.call(this)).vertices=[],r.minDraggedDistance=.2,e.add(Object(pe.a)(r)),r.material=Ie(we),r.visible=!1,r}return Object(fe.a)(n,[{key:"isActive",value:function(){return this.visible}},{key:"setActive",value:function(e){this.visible=e}},{key:"setStartPosition",value:function(e){this.startPosition=e,this.setActive(!0),this.updateArea(e)}},{key:"updateArea",value:function(e){var t=e.y>this.startPosition.y?this.startPosition.y:e.y,n=e.y>this.startPosition.y?e.y:this.startPosition.y,r=e.x>this.startPosition.x?this.startPosition.x:e.x,i=e.x>this.startPosition.x?e.x:this.startPosition.x;this.vertices=[new ce.v(r,n,0),new ce.v(i,n,0),new ce.v(i,t,0),new ce.v(r,t,0)],this.geometry&&this.geometry.dispose(),this.geometry=wn(this.vertices)}},{key:"getContainsVertices",value:function(e){var t=this;return 4===this.vertices.length?e.filter((function(e){return function(e,t,n){return e.x<=n.x&&n.x<=t.x&&t.y<=n.y&&n.y<=e.y}(t.vertices[0],t.vertices[2],e.position)})):[]}},{key:"isDragged",value:function(){return 4===this.vertices.length&&this.vertices[0].distanceTo(this.vertices[2])>this.minDraggedDistance}}]),n}(ce.h),In=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(de.a)(this,e),this.draggedSelectionArea=!1,this.floorPlanerController=t,this.selectableRepresentationTypes=n,this.selectionArea=new zn(t.scene)}return Object(fe.a)(e,[{key:"onLeftMouseDown",value:function(){var e=this.floorPlanerController.getCurrentPosition();this.selectionArea.setStartPosition(e),this.draggedSelectionArea=!1}},{key:"onMouseMove",value:function(e,t){var n=this;if(this.selectionArea.isActive()){this.unselectGeometriesByStartDraggingSelectionArea(t);var r=this.floorPlanerController.getCurrentPosition();this.selectionArea.updateArea(r),this.floorPlanerController.getGeometries().forEach((function(e){n.removeGeometryFromCurrentGeometries(e,t),e.setActive(!1)}));var i=[];this.selectionArea.getContainsVertices(this.floorPlanerController.getAllVertices()).forEach((function(e){var t=e.getGeometry();i.includes(t)||i.push(t)}));var o=t.filter((function(e){return i.includes(e)}));(i=i.filter((function(e){return!t.includes(e)}))).forEach((function(e){e.setActive(!0),t.push(e)})),o.forEach((function(e){n.removeGeometryFromCurrentGeometries(e,t)}))}}},{key:"unselectGeometriesByStartDraggingSelectionArea",value:function(e){if(!this.draggedSelectionArea&&!this.selectionArea.isDragged()){for(var t=e.length-1;t>=0;t--)this.removeGeometryFromCurrentGeometries(e[t],e);this.draggedSelectionArea=!0}}},{key:"onLeftMouseUp",value:function(e,t){if(!this.selectionArea.isActive()||(this.selectionArea.setActive(!1),!this.selectionArea.isDragged())){var n=this.floorPlanerController.getRaycastHitObjectsByRepresentationTypes(this.selectableRepresentationTypes),r=n.length?n[0]:null;if(t.length&&r&&(e.ctrlKey||e.metaKey))if(r.isActive()){r.setActive(!1);var i=t.findIndex((function(e){return e===r}));t.splice(i,1)}else r.setActive(!0),t.push(r);else if(t.length&&r&&!e.ctrlKey&&!e.metaKey){if(1===t.length){var o=n.findIndex((function(e){return e===t[0]}));o>=0&&(r=n[(o+1)%n.length])}t.forEach((function(e){return e.setActive(!1)})),t.splice(0,t.length),r.setActive(!0),t.push(r)}else!t.length&&r?(r.setActive(!0),t.push(r)):t.length&&!r&&(t.forEach((function(e){return e.setActive(!1)})),t.splice(0,t.length))}}},{key:"onKeyADown",value:function(e,t){var n=this;(e.ctrlKey||e.metaKey)&&this.floorPlanerController.getGeometries().filter((function(e){return n.selectableRepresentationTypes.includes(e.representationType)})).forEach((function(e){e.setActive(!0),t.includes(e)||t.push(e)}))}},{key:"onEscapeDown",value:function(e,t){if(this.selectionArea.isActive()){for(var n=t.length;n>=0;n--)this.removeGeometryFromCurrentGeometries(t[n],t);this.selectionArea.setActive(!1)}}},{key:"cancelCurrentActions",value:function(e){var t=this;e.filter((function(e){return t.selectableRepresentationTypes.includes(e.representationType)})).forEach((function(e){e.setActive(!1)})),e.splice(0,e.length)}},{key:"removeGeometryFromCurrentGeometries",value:function(e,t){if(t.includes(e)){e.setActive(!1);var n=t.findIndex((function(t){return t===e}));t.splice(n,1)}}}]),e}(),Un=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(){return Object(de.a)(this,n),t.apply(this,arguments)}return Object(fe.a)(n,[{key:"onLeftMouseDownNew",value:function(e,t,n){var r=this.getCurrentPosition(e,t.draggedVertex?t.draggedVertex.position:null);return t.addVertex(r),t.addVertex(r),t.setAction(t.actions.addVertex),n.push(t),!0}},{key:"onMouseMove",value:function(e,t,n){var r=this.onMouseMovePreviewVertex(e,t,n);return void 0!==r?r:!!t&&this.onMouseMoveCurrentGeometry(e,t,n)}},{key:"onMouseMovePreviewVertex",value:function(e,t,n){if(!t&&!n.length)return pn(this.getCurrentPosition(e),this.representationType),!0;if(n.length&&t&&t.getAction()===t.actions.select){var r=this.floorPlanerController.getRaycastHitObjectForGeometryByGeometryTypes(t,[Pt,St]);if(r)return r.geometryType===St&&(pn(this.getCurrentPosition(e),this.representationType),!0)}}},{key:"onMouseMoveCurrentGeometry",value:function(e,t,n){switch(t.getAction()){case t.actions.addVertex:if(1!==n.length)return!1;var r=t.getLastVertex();return t.updateVertex(this.getCurrentPosition(e,r.position),r),!0;case t.actions.drag:return t.moveDelta(this.floorPlanerController.getMouseDeltaMovement()),!0;case t.actions.dragVertex:return t.updateVertex(this.getCurrentPosition(e,t.draggedVertex.position)),!0;default:return!1}}},{key:"onLeftMouseDoubleClick",value:function(e,t,n,r){return!!t&&(t.getAction()===t.actions.addVertex&&(t.getVerticesCount()>=r&&(t.close(),this.removeGeometryFromCurrentGeometries(t,n),!0)))}},{key:"onLeftMouseUp",value:function(e,t,n){if(!t)return!1;switch(t.getAction()){case t.actions.drag:t.setAction(t.actions.select);var r=!!this.startDragPosition&&!!this.startDragPosition.distanceToSquared(this.floorPlanerController.getCurrentPosition());return this.startDragPosition=null,r;case t.actions.dragVertex:return t.setAction(t.actions.select),!0;default:return!1}}},{key:"onBackspaceDown",value:function(e,t,n){if(!t)return!1;switch(t.getAction()){case t.actions.addVertex:return t.getVerticesCount()<=2?this.removeGeometryFromGroup(t,n):(t.removeLastVertex(),t.updateVertex(this.getCurrentPosition(e,t.getLastVertex().position),t.getLastVertex())),!0;case t.actions.select:return this.removeGeometryFromGroup(t,n),!0;default:return!1}}},{key:"onEscapeDown",value:function(e,t,n){if(!t)return!1;switch(t.getAction()){case t.actions.addVertex:return this.removeGeometryFromGroup(t,n),!0;case t.actions.select:return t.setActive(!1),this.removeGeometryFromCurrentGeometries(t,n),!0;default:return!1}}},{key:"onEnterDown",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(t)return t.getAction()===t.actions.addVertex&&(t.getVerticesCount()>=r&&(t.close(),this.removeGeometryFromCurrentGeometries(t,n),!0))}},{key:"getCurrentPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.floorPlanerController.getAllVerticesPositions().filter((function(e){return e!==t}));return un(e,this.floorPlanerController.getCurrentPosition(),n)}}]),n}(Ft);function Hn(e,t){var n=t.vertexGroup,r=t.edgeGroup;if(n.addVertex(e),n.children.length>1){var i=n.getVertexByIndex(-2),o=n.getVertexByIndex(-1);r.addEdge(i,o)}}function Zn(e,t,n){var r=n.vertexGroup,i=n.edgeGroup,o=n.face;n.draggedVertex=i.addVertexToEdge(e,t),o&&o.update(r.getPositions())}function Kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.vertexGroup,i=t.face,o=t.draggedVertex;!n&&o&&(n=o),r.updateVertex(n,e),i&&i.update(r.getPositions())}function Wn(e){var t=e.vertexGroup,n=t.getVertexByIndex(-1);t.removeVertex(n)}function Yn(e,t){if(0!==e.lengthSq()){var n=t.vertexGroup,r=t.face;n.moveDeltaAllVertices(e),r&&r.update(n.getPositions())}}function Xn(e){return e.vertexGroup.getVertexByIndex(-1)}function Jn(e,t){t.draggedVertex=e}function _n(e){return e.vertexGroup.getCount()}var qn={drag:"drag",addVertex:"addVertex",selectVertex:"selectVertex",dragVertex:"dragVertex"},Qn=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i;return Object(de.a)(this,n),(i=t.call(this,e,r,qn)).geometryType=zt,i.addVertex=function(e){return Hn(e,Object(pe.a)(i))},i.addVertexToEdge=function(e,t){return Zn(e,t,Object(pe.a)(i))},i.updateVertex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Kn(e,Object(pe.a)(i),t)},i.removeLastVertex=function(){return Wn(Object(pe.a)(i))},i.moveDelta=function(e){return Yn(e,Object(pe.a)(i))},i.getLastVertex=function(){return Xn(Object(pe.a)(i))},i.setDraggedVertex=function(e){return Jn(e,Object(pe.a)(i))},i.getVerticesCount=function(){return _n(Object(pe.a)(i))},i}return Object(fe.a)(n,[{key:"close",value:function(){this.removeLastVertex();var e=this.vertexGroup.getVertexByIndex(-1),t=this.vertexGroup.getVertexByIndex(0);this.edgeGroup.addEdge(e,t),this.setAction(qn.idle),this.face&&this.face.dispose(),this.face=new kn(this.representationType,this.vertexGroup.getPositions()),this.face.parent||this.add(this.face)}},{key:"setActive",value:function(e){Object(vn.a)(Object(gn.a)(n.prototype),"setActive",this).call(this,e),this.face&&this.face.setActive(e)}},{key:"getFirstVertex",value:function(){return this.vertexGroup.children.length?this.vertexGroup.children[0]:null}},{key:"isClockwise",value:function(){for(var e=0,t=this.vertexGroup.getPositions(),r=0;r<t.length-1;r++)e+=n.isClockwiseHelper(t[r],t[r+1]);return(e+=n.isClockwiseHelper(t[t.length-1],t[0]))>=0}},{key:"dispose",value:function(){Object(vn.a)(Object(gn.a)(n.prototype),"dispose",this).call(this),this.face&&this.face.dispose()}},{key:"fromJSON",value:function(e){Object(vn.a)(Object(gn.a)(n.prototype),"fromJSON",this).call(this,e),this.face=new kn(this.representationType,this.vertexGroup.getPositions()),this.add(this.face)}}],[{key:"isClockwiseHelper",value:function(e,t){return(t.x-e.x)*(t.y+e.y)}}]),n}(jn),$n=Qn;function er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2,r=rr(e,n),i=rr(e,-t);if(An(e)){var o=r;r=i,i=o}var a=wn(i,[r]);return{geometry:a,innerVertices:r,outerVertices:i}}function tr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2,r=nr(e,t).concat(nr(e,-n).reverse()),i=wn(r);return{geometry:i,vertices:r}}function nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],r=new ce.u(e[0].x,e[0].y),i=new ce.u(e[1].x,e[1].y),o=r.clone().sub(i).normalize().multiplyScalar(t).add(r).rotateAround(r,ce.f.degToRad(-90));n.push(o);for(var a=new ce.a(new Float32Array([t,0,0]),3),s=1;s<e.length-1;s++)n.push(ir(e[s-1],e[s],e[s+1],a));var c=new ce.u(e[e.length-1].x,e[e.length-1].y),u=new ce.u(e[e.length-2].x,e[e.length-2].y),l=c.clone().sub(u).normalize().multiplyScalar(t).add(c).rotateAround(c,ce.f.degToRad(90));return n.push(l),n}function rr(e,t){for(var n=[],r=new ce.a(new Float32Array([t,0,0]),3),i=0;i<e.length;i++)n.push(ir(e[i-1<0?e.length-1:i-1],e[i],e[i+1===e.length?0:i+1],r));return n}function ir(e,t,n,r){var i=(new ce.u).subVectors(e,t),o=(new ce.u).subVectors(n,t),a=.5*(o.angle()-i.angle()),s=o.angle()+.5*Math.PI,c=Math.tan(a-.5*Math.PI),u=(new ce.g).set(1,0,0,0,-c,1,0,0,0,0,1,0,0,0,0,1),l=(new ce.g).set(Math.cos(s),-Math.sin(s),0,0,Math.sin(s),Math.cos(s),0,0,0,0,1,0,0,0,0,1),h=(new ce.g).set(1,0,0,t.x,0,1,0,t.y,0,0,1,0,0,0,0,1),d=r.clone();return d.applyMatrix4(u),d.applyMatrix4(l),d.applyMatrix4(h),new ce.u(d.getX(0),d.getY(0))}function or(e){switch(e){case bt.outline:return Zt.properties;case bt.wall:return _t.properties;default:return qt.properties}}function ar(e){return e.offsetLeft+e.offsetRight}function sr(e){return{offsetLeft:e.offsetLeft,offsetRight:e.offsetRight}}function cr(e,t){e.hasOwnProperty("offsetLeft")&&e.hasOwnProperty("offsetRight")&&(e.offsetLeft>0&&e.offsetRight>0?(e.offsetLeft=t/2,e.offsetRight=t/2):e.offsetLeft>0?e.offsetLeft=t:e.offsetRight=t)}function ur(e){if(e.hasOwnProperty("offsetLeft")&&e.hasOwnProperty("offsetRight"))if(0===e.offsetLeft){var t=e.offsetRight/2;e.offsetLeft=t,e.offsetRight=t}else e.offsetLeft>0&&e.offsetRight>0&&(e.offsetLeft=e.offsetLeft+e.offsetRight,e.offsetRight=0)}function lr(e){if(e.hasOwnProperty("offsetLeft")&&e.hasOwnProperty("offsetRight"))if(0===e.offsetRight){var t=e.offsetLeft/2;e.offsetLeft=t,e.offsetRight=t}else e.offsetLeft>0&&e.offsetRight>0&&(e.offsetRight=e.offsetLeft+e.offsetRight,e.offsetLeft=0)}function hr(e,t){if(e.hasOwnProperty("offsetLeft")&&e.hasOwnProperty("offsetRight")&&e.hasOwnProperty("setOffset")){var n=e.offsetLeft+e.offsetRight;n+t>.2&&e.setOffset(n+t)}}var dr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r,i){var o;if(Object(de.a)(this,n),o=t.call(this,e,r),i)o.offsetLeft=i.offsetLeft,o.offsetRight=i.offsetRight,o.properties=i;else{var a=or(r);o.offsetLeft=a.offsetLeft,o.offsetRight=a.offsetRight,o.properties=a}return o.addToOffset=function(e){hr(Object(pe.a)(o),e),o.updateOffsetFace()},o.setOffset=function(e){return cr(Object(pe.a)(o),e)},o.getOffset=function(){return ar(Object(pe.a)(o))},o.getOffsets=function(){return sr(Object(pe.a)(o))},o.shiftOffsetToLeft=function(){ur(Object(pe.a)(o)),o.updateOffsetFace()},o.shiftOffsetToRight=function(){lr(Object(pe.a)(o)),o.updateOffsetFace()},o.updateVertex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Kn(e,Object(pe.a)(o),t),o.updateOffsetFace()},o.addVertexToEdge=function(e,t){Zn(e,t,Object(pe.a)(o)),o.updateOffsetFace()},o.moveDelta=function(e){Yn(e,Object(pe.a)(o)),o.offsetFace&&(o.offsetFace.position.x+=e.x,o.offsetFace.position.y+=e.y)},o}return Object(fe.a)(n,[{key:"close",value:function(){Object(vn.a)(Object(gn.a)(n.prototype),"close",this).call(this),this.vertexGroup.setActive(!1),this.edgeGroup.setActive(!1),this.createOffsetFace()}},{key:"getVerticesPositions",value:function(){var e=Object(vn.a)(Object(gn.a)(n.prototype),"getVerticesPositions",this).call(this);return this.offsetFace?e.concat(this.offsetFace.outerVertices).concat(this.offsetFace.innerVertices):e}},{key:"fromJSON",value:function(e){Object(vn.a)(Object(gn.a)(n.prototype),"fromJSON",this).call(this,e),this.createOffsetFace()}},{key:"getNearestEdgeToPosition",value:function(e){return this.edgeGroup.getNearestEdgeToPosition(e)}},{key:"createOffsetFace",value:function(){var e=er(this.vertexGroup.getPositions(),this.offsetLeft,this.offsetRight),t=e.geometry,n=e.innerVertices,r=e.outerVertices;this.offsetFace=new ce.h(t,Ie(Ve)),this.offsetFace.geometryType=Ht,this.offsetFace.innerVertices=n,this.offsetFace.outerVertices=r,this.add(this.offsetFace)}},{key:"updateOffsetFace",value:function(){var e=this.offsetFace,t=this.vertexGroup,n=this.offsetLeft,r=this.offsetRight;if(e){e.position.set(0,0),e.geometry.dispose();var i=er(t.getPositions(),n,r),o=i.geometry,a=i.innerVertices,s=i.outerVertices;e.geometry=o,e.innerVertices=a,e.outerVertices=s,this.edgeGroup.updateAllEdgesCallbacks()}}}]),n}($n),fr={drag:"drag",addVertex:"addVertex"},pr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i;return Object(de.a)(this,n),(i=t.call(this,e,r,fr)).geometryType=It,i.addVertex=function(e){return Hn(e,Object(pe.a)(i))},i.addVertexToEdge=function(e,t){return Zn(e,t,Object(pe.a)(i))},i.updateVertex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Kn(e,Object(pe.a)(i),t)},i.removeLastVertex=function(){return Wn(Object(pe.a)(i))},i.moveDelta=function(e){return Yn(e,Object(pe.a)(i))},i.setDraggedVertex=function(e){return Jn(e,Object(pe.a)(i))},i.getLastVertex=function(){return Xn(Object(pe.a)(i))},i.getVerticesCount=function(){return _n(Object(pe.a)(i))},i}return Object(fe.a)(n,[{key:"close",value:function(){var e=this.vertexGroup.getVertexByIndex(-1);this.edgeGroup.removeEdges(e.getEdges()),this.vertexGroup.remove(e)}}]),n}(jn),vr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r,i){var o;if(Object(de.a)(this,n),o=t.call(this,e,r),i)o.offsetLeft=i.offsetLeft,o.offsetRight=i.offsetRight,o.properties=i;else{var a=or(r);o.offsetLeft=a.offsetLeft,o.offsetRight=a.offsetRight,o.properties=a}return o.addToOffset=function(e){hr(Object(pe.a)(o),e),o.updateOffsetFace()},o.setOffset=function(e){return cr(Object(pe.a)(o),e)},o.getOffset=function(){return ar(Object(pe.a)(o))},o.getOffsets=function(){return sr(Object(pe.a)(o))},o.shiftOffsetToLeft=function(){ur(Object(pe.a)(o)),o.updateOffsetFace()},o.shiftOffsetToRight=function(){lr(Object(pe.a)(o)),o.updateOffsetFace()},o.updateVertex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Kn(e,Object(pe.a)(o),t),o.updateOffsetFace()},o.addVertexToEdge=function(e,t){Zn(e,t,Object(pe.a)(o)),o.updateOffsetFace()},o.moveDelta=function(e){Yn(e,Object(pe.a)(o)),o.offsetFace&&(o.offsetFace.position.x+=e.x,o.offsetFace.position.y+=e.y)},o}return Object(fe.a)(n,[{key:"close",value:function(){Object(vn.a)(Object(gn.a)(n.prototype),"close",this).call(this),this.vertexGroup.setActive(!1),this.edgeGroup.setActive(!1),this.createOffsetFace()}},{key:"getVerticesPositions",value:function(){var e=Object(vn.a)(Object(gn.a)(n.prototype),"getVerticesPositions",this).call(this);return this.offsetFace?this.offsetLeft>0&&this.offsetRight>0?e.concat(this.offsetFace.vertices):this.offsetFace.vertices:e}},{key:"getNearestEdgeToPosition",value:function(e){return this.edgeGroup.getNearestEdgeToPosition(e)}},{key:"createOffsetFace",value:function(){var e=tr(this.vertexGroup.getPositions(),this.offsetLeft,this.offsetRight),t=e.geometry,n=e.vertices;this.offsetFace=new ce.h(t,Ie(Ve)),this.offsetFace.geometryType=Ht,this.offsetFace.vertices=n,this.add(this.offsetFace)}},{key:"updateOffsetFace",value:function(){var e=this.offsetFace,t=this.vertexGroup,n=this.offsetLeft,r=this.offsetRight;if(e){e.position.set(0,0),e.geometry.dispose();var i=tr(t.getPositions(),n,r),o=i.geometry,a=i.vertices;e.geometry=o,e.vertices=a,this.edgeGroup.updateAllEdgesCallbacks()}}},{key:"fromJSON",value:function(e){Object(vn.a)(Object(gn.a)(n.prototype),"fromJSON",this).call(this,e),this.createOffsetFace()}}]),n}(pr),gr={drag:"drag",addVertex:"addVertex",dragVertex:"dragVertex"},yr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r){var i;return Object(de.a)(this,n),(i=t.call(this,e,r,gr)).addVertex=function(e){return Hn(e,Object(pe.a)(i))},i.addVertexToEdge=function(e,t){return Zn(e,t,Object(pe.a)(i))},i.updateVertex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Kn(e,Object(pe.a)(i),t)},i.removeLastVertex=function(){return Wn(Object(pe.a)(i))},i.getLastVertex=function(){return Xn(Object(pe.a)(i))},i.getLastEdge=function(){return Object(pe.a)(i).edgeGroup.getEdgeByIndex(-1)},i.setDraggedVertex=function(e){return Jn(e,Object(pe.a)(i))},i.getVerticesCount=function(){return _n(Object(pe.a)(i))},i}return Object(fe.a)(n,[{key:"extendAtVertex",value:function(e,t){this.vertexGroup.setVertexOrder(e,-1),this.addVertex(t),this.setActive(!0),this.setAction(this.actions.addVertex)}},{key:"extendAtEdge",value:function(e,t){this.addVertexToEdge(e,t),this.addVertex(t),this.setActive(!0),this.setAction(this.actions.addVertex)}},{key:"mergeToOwnVertex",value:function(e,t){t.setActive(!1);var n=t.getLastVertex(),r=n.getEdges()[0].getVertices().find((function(e){return e!==n}));t.removeLastVertex(),bn(t.vertexGroup,this.vertexGroup),bn(t.edgeGroup,this.edgeGroup),this.edgeGroup.addEdge(r,e)}},{key:"mergeToOwnEdge",value:function(e,t){t.setActive(!1);var n=t.getLastVertex(),r=n.getEdges()[0].getVertices().find((function(e){return e!==n}));t.removeLastVertex(),bn(t.vertexGroup,this.vertexGroup),bn(t.edgeGroup,this.edgeGroup);var i=this.edgeGroup.addVertexToEdge(e,n.position);this.edgeGroup.addEdge(r,i),this.setActive(!1)}},{key:"connectLastVertexToOwnVertex",value:function(e){var t=this.getLastVertex(),n=t.getEdges()[0].getVertices().find((function(e){return e!==t}));this.removeLastVertex(),this.edgeGroup.addEdge(n,e),this.setActive(!1)}},{key:"connectLastVertexToOwnEdge",value:function(e){var t=this.getLastVertex(),n=t.getEdges()[0].getVertices().find((function(e){return e!==t}));this.removeLastVertex();var r=this.edgeGroup.addVertexToEdge(e,t.position);this.edgeGroup.addEdge(n,r),this.setActive(!1)}},{key:"close",value:function(){var e=this.vertexGroup.getVertexByIndex(-1);this.edgeGroup.removeEdges(e.getEdges()),this.vertexGroup.remove(e),this.setActive(!1)}}]),n}(jn);function br(e,t,n){switch(e){case bt.outline:return new dr(t,e,n);case bt.wall:return new vr(t,e,n);case bt.door:case bt.window:return new Pn(t,e,n);case bt.graph:return new yr(t,e,n);case bt.new:return new $n(t,e,n);default:return null}}var mr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(){return Object(de.a)(this,n),t.apply(this,arguments)}return Object(fe.a)(n,[{key:"onArrowLeftDown",value:function(e,t){t&&t.shiftOffsetToLeft()}},{key:"onArrowRightDown",value:function(e,t){t&&t.shiftOffsetToRight()}},{key:"onArrowUpDown",value:function(e,t){t&&t.addToOffset(.2)}},{key:"onArrowDownDown",value:function(e,t){t&&t.addToOffset(-.2)}}]),n}(function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(e,r,i){var o;return Object(de.a)(this,n),(o=t.call(this,e,r,i)).closingDistance=.5,o.minVerticesCount=3,o}return Object(fe.a)(n,[{key:"onLeftMouseDown",value:function(e,t,n){return t?(console.log("geo yet ",t),this.onLeftMouseDownEdit(e,t,n)):(console.log("nooo  geo yet "),this.onLeftMouseDownNew(e,n))}},{key:"onLeftMouseDownNew",value:function(e,t){var r=br(this.representationType,this.group);return Object(vn.a)(Object(gn.a)(n.prototype),"onLeftMouseDownNew",this).call(this,e,r,t)}},{key:"onLeftMouseDownEdit",value:function(e,t,n){if(!t)return!1;switch(t.getAction()){case t.actions.addVertex:if(1!==n.length)return!1;var r=this.getCurrentPosition(e,t.getLastVertex().position);return t.getFirstVertex().position.distanceTo(r)<this.closingDistance?(t.close(),this.removeGeometryFromCurrentGeometries(t,n)):t.addVertex(r),!0;case t.actions.select:var i=this.floorPlanerController.getRaycastHitObjectForGeometryByGeometryTypes(t,[Pt,St,Bt]);if(!i)return!1;switch(i.geometryType){case Pt:return t.setDraggedVertex(i),t.setAction(t.actions.dragVertex),!0;case St:return t.addVertexToEdge(i,this.floorPlanerController.getCurrentPosition()),t.setAction(t.actions.dragVertex),!0;case Bt:return this.startDragPosition=this.floorPlanerController.getCurrentPosition().clone(),n.filter((function(e){return e.actions.drag})).forEach((function(e){return e.setAction(e.actions.drag)})),!0;default:return!1}default:return!1}}},{key:"onLeftMouseDoubleClick",value:function(e,t,r){return Object(vn.a)(Object(gn.a)(n.prototype),"onLeftMouseDoubleClick",this).call(this,e,t,r,3)}},{key:"onEnterDown",value:function(e,t,r){return Object(vn.a)(Object(gn.a)(n.prototype),"onEnterDown",this).call(this,e,t,r,this.minVerticesCount)}}]),n}(Un)),xr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(){return Object(de.a)(this,n),t.apply(this,arguments)}return Object(fe.a)(n,[{key:"onLeftMouseDown",value:function(e,t,n){return t?this.onLeftMouseDownEdit(e,t,n):this.onLeftMouseDownNew(e,n)}},{key:"onLeftMouseDownNew",value:function(e,t){var r=br(this.representationType,this.group);return Object(vn.a)(Object(gn.a)(n.prototype),"onLeftMouseDownNew",this).call(this,e,r,t)}},{key:"onLeftMouseDownEdit",value:function(e,t,n){if(!t)return!1;switch(t.getAction()){case t.actions.addVertex:return 1===n.length&&(t.addVertex(this.getCurrentPosition(e,t.getLastVertex().position)),!0);case t.actions.select:var r=this.floorPlanerController.getRaycastHitObjectForGeometryByGeometryTypes(t,[Pt,St]);if(!r)return!1;switch(r.geometryType){case Pt:return t.setDraggedVertex(r),t.setAction(t.actions.dragVertex),!0;case St:return t.addVertexToEdge(r,this.floorPlanerController.getCurrentPosition()),t.setAction(t.actions.dragVertex),!0;default:return!1}default:return!1}}},{key:"onLeftMouseDoubleClick",value:function(e,t,r){return Object(vn.a)(Object(gn.a)(n.prototype),"onLeftMouseDoubleClick",this).call(this,e,t,r,2)}},{key:"onEnterDown",value:function(e,t,r){return Object(vn.a)(Object(gn.a)(n.prototype),"onEnterDown",this).call(this,e,t,r,2)}}]),n}(Un),Or=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(){return Object(de.a)(this,n),t.apply(this,arguments)}return Object(fe.a)(n,[{key:"onArrowLeftDown",value:function(e,t){t&&t.shiftOffsetToLeft()}},{key:"onArrowRightDown",value:function(e,t){t&&t.shiftOffsetToRight()}},{key:"onArrowUpDown",value:function(e,t){t&&t.addToOffset(.2)}},{key:"onArrowDownDown",value:function(e,t){t&&t.addToOffset(-.2)}}]),n}(xr),jr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(){return Object(de.a)(this,n),t.apply(this,arguments)}return Object(fe.a)(n,[{key:"onLeftMouseDown",value:function(e,t){return t?n.onLeftMouseDownEdit(e,t):this.onLeftMouseDownNew()}},{key:"onLeftMouseDownNew",value:function(){var e=this.getEdgeAndPosition(),t=e.edge,n=e.position;return!!(t&&t.parent&&t.parent.parent)&&(new Pn(this.group,this.representationType).updateReferenceEdge(t,n),!0)}},{key:"onArrowLeftDown",value:function(e,t){return n.move(t,-.01)}},{key:"onArrowRightDown",value:function(e,t){return n.move(t,.01)}},{key:"onArrowUpDown",value:function(e,t){return n.addWidth(t,.01)}},{key:"onArrowDownDown",value:function(e,t){return n.addWidth(t,-.01)}},{key:"onMouseMove",value:function(e,t,n){if(!t&&!n.length){var r=this.getEdgeAndPosition(),i=r.position,o=r.edge;return Nn(i,this.representationType,o),!0}if(!t)return!1;switch(t.getAction()){case t.actions.drag:return t.moveDelta(this.floorPlanerController.getMouseDeltaMovement()),!0;case t.actions.resize:return!!e.altKey&&(t.addWidth(this.floorPlanerController.getMouseDeltaMovement().x),!0);default:return!1}}},{key:"onLeftMouseUp",value:function(e,t){if(!t)return!1;switch(t.getAction()){case t.actions.drag:case t.actions.resize:return t.setAction(t.actions.select),!0;default:return!1}}},{key:"onBackspaceDown",value:function(e,t,n){return!!t&&(t.getAction()===t.actions.select&&(this.removeGeometryFromGroup(t,n),!0))}},{key:"getEdgeAndPosition",value:function(){var e=this.floorPlanerController.getRaycastHitObjectByRepresentationTypes([bt.outline,bt.wall],[Bt]),t=e?e.getNearestEdgeToPosition(this.floorPlanerController.getCurrentPosition()):e,n=t?t.getNearestPositionOnEdge(this.floorPlanerController.getCurrentPosition()):this.floorPlanerController.getCurrentPosition();return{edge:t,position:n}}}],[{key:"onLeftMouseDownEdit",value:function(e,t){return!!t&&(t.getAction()===t.actions.select&&(!!e.altKey&&(t.setAction(t.actions.resize),!0)))}},{key:"addWidth",value:function(e,t){return!!e&&(e.getAction()===e.actions.select&&(e.addWidth(t),!0))}},{key:"move",value:function(e,t){return!!e&&(e.getAction()===e.actions.select&&(e.move(t),!0))}}]),n}(Ft),wr=function(e){Object(ve.a)(n,e);var t=Object(ge.a)(n);function n(){return Object(de.a)(this,n),t.apply(this,arguments)}return Object(fe.a)(n,[{key:"onLeftMouseDown",value:function(e,t,n){return t?this.onLeftMouseDownEdit(e,t,n):this.onLeftMouseDownNew(e,n)}},{key:"onLeftMouseDownNew",value:function(e,t){var r=this.floorPlanerController.getRaycastHitObjectByRepresentationTypesAndGeometryType([this.representationType],[Pt,St]);switch(r?r.geometryType:null){case Pt:var i=r.getGeometry();return i.extendAtVertex(r,this.getCurrentPosition(e)),t.push(i),!0;case St:var o=r.getGeometry();return o.extendAtEdge(r,this.getCurrentPosition(e)),t.push(o),!0;default:var a=br(this.representationType,this.group);return Object(vn.a)(Object(gn.a)(n.prototype),"onLeftMouseDownNew",this).call(this,e,a,t)}}},{key:"onLeftMouseDownEdit",value:function(e,t,n){if(!t)return!1;switch(t.getAction()){case t.actions.addVertex:if(1!==n.length)return!1;var r=this.floorPlanerController.getRaycastHitObjectByRepresentationTypesAndGeometryType([this.representationType],[Pt,St],[],[t.getLastVertex(),t.getLastEdge()]),i=r?r.geometryType:null,o=this.getCurrentPosition(e,t.getLastVertex().position);switch(i){case Pt:var a=r.getGeometry();return a===t?(t.connectLastVertexToOwnVertex(r),this.removeGeometryFromCurrentGeometries(t,n)):(a.mergeToOwnVertex(r,t),this.removeGeometryFromCurrentGeometries(t,n)),!0;case St:var s=r.getGeometry();return s===t?(t.connectLastVertexToOwnEdge(r),this.removeGeometryFromCurrentGeometries(t,n)):(s.mergeToOwnEdge(r,t),this.removeGeometryFromCurrentGeometries(t,n)),!0}return t.addVertex(o),!0;case t.actions.select:return this.onLeftMouseDownSelect(e,t);default:return!1}}},{key:"onLeftMouseDownSelect",value:function(e,t){var n=this.floorPlanerController.getRaycastHitObjectForGeometryByGeometryTypes(t,[Pt,St]);if(!n)return!1;switch(n.geometryType){case Pt:return t.setDraggedVertex(n),t.setAction(t.actions.dragVertex),!0;case St:return t.addVertexToEdge(n,this.getCurrentPosition(e)),t.setAction(t.actions.dragVertex),!0;default:return!1}}}]),n}(Un);var kr=function(){function e(t,n,r,i,o){var a=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=arguments.length>6?arguments[6]:void 0;Object(de.a)(this,e),this.representationGroups=new Map,this.representationController=new Map,this.currentPosition=new ce.v,this.lastPosition=new ce.v,this.catchPlane=null,this.currentTool=bt.select,this.currentGeometries=[],this.lastCameraZoom=null,this.isActionExecuted=!1,this.mount=t,this.scene=n,this.camera=r,this.raycaster=i,this.orbitControls=o,this.renderer=c,this.selectController=new In(this,[bt.door,bt.window,bt.outline,bt.wall,bt.graph]),Ye(t.current,(function(e){return a.onMouseDown(e)}),(function(e){return a.onMouseMove(e)})),Ye(document,null,null,(function(e){return a.onMouseUp(e)})),_e((function(e){return a.onKeyDown(e)}),(function(e){return a.onKeyUp(e)})),this.catchPlane=this.scene.children.find((function(e){return"catchPlane"===e.name})),this.magicGuideLine=new cn(this.scene),this.previewVertex=new fn(this.scene),this.previewStamp=new Fn(this.scene),this.previewReferenceEdge=new Bn(this.scene),this.orbitControls.addEventListener(ye,(function(){return a.updateCamera()})),this.setUpRepresentationTypeGroup(s),this.setUpRepresentationTypeController(s)}return Object(fe.a)(e,[{key:"setUpRepresentationTypeGroup",value:function(e){var t=this;e.forEach((function(e){var n=new ce.d;n.name=e+"Group",t.representationGroups.set(e,n),t.scene.add(n)}))}},{key:"setUpRepresentationTypeController",value:function(e){var t=this;e.forEach((function(e){var n=function(e,t,n){switch(t){case bt.outline:return new mr(e,t,n);case bt.wall:return new Or(e,t,n);case bt.door:return new jr(e,t,n);case bt.graph:return new wr(e,t,n);default:return}}(t,e,t.representationGroups.get(e));n&&t.representationController.set(e,n)}))}},{key:"deconstructor",value:function(e){var t,n,r,i,o,a,s=this;t=e,r=function(e){return s.onMouseMove(e)},i=function(e){return s.onMouseUp(e)},(n=function(e){return s.onMouseDown(e)})&&t.removeEventListener(Ze,n,!0),r&&t.removeEventListener(Ke,r,!0),i&&t.removeEventListener(We,i,!0),a=function(e){return s.onKeyUp(e)},(o=function(e){return s.onKeyDown(e)})&&document.removeEventListener(Xe,o,!0),a&&document.removeEventListener(Je,a,!0)}},{key:"onMouseDown",value:function(e){0===e.button?1===e.detail?this.callFunctionPrimaryForCurrentGeometries(mt,e)||this.callFunctionForSelection(mt,e):2===e.detail&&(this.callFunctionPrimaryForCurrentGeometries(xt,e)||this.callFunctionForSelection(mt,e)):2===e.button&&(1===e.detail?this.callFunctionPrimaryForCurrentGeometries(Ot,e)||this.callFunctionForSelection(Ot,e):2===e.detail&&(this.callFunctionPrimaryForCurrentGeometries(jt,e)||this.callFunctionForSelection(jt,e)))}},{key:"onMouseMove",value:function(e){this.storeCurrentPosition(e),this.previewVertex.setActive(!1),this.previewStamp.setActive(!1),this.previewReferenceEdge.setActive(!1),this.callFunctionPrimaryForCurrentGeometries(kt,e)||this.callFunctionForAllRepresentationTypes(kt,e)||this.callFunctionForSelection(kt,e)}},{key:"onMouseUp",value:function(e){0===e.button&&1===e.detail&&(this.callFunctionPrimaryForCurrentGeometries(wt,e)||this.callFunctionForSelection(wt,e))}},{key:"onKeyDown",value:function(e){switch(e.code){case qe:this.changeTool(bt.select);break;case Qe:this.orbitControls.enablePan=!1,this.changeTool(bt.outline);break;case $e:this.changeTool(bt.wall);break;case et:this.changeTool(bt.door);break;case tt:this.changeTool(bt.window);break;case nt:this.changeTool(bt.graph);break;case rt:this.callFunctionForCurrentGeometries(Ct,e);break;case it:this.callFunctionForCurrentGeometries(At,e),this.callFunctionForSelection(At,e);break;case ot:this.callFunctionForCurrentGeometries(Et,e);break;case at:this.resetCamera();break;case lt:this.callFunctionForCurrentGeometries(Vt,e);break;case ht:this.callFunctionForCurrentGeometries(Gt,e);break;case ft:this.callFunctionForCurrentGeometries(Dt,e);break;case dt:this.callFunctionForCurrentGeometries(Tt,e);break;case vt:this.callFunctionPrimaryForCurrentGeometries(Mt,e)||this.callFunctionForSelection(Mt,e);break;case gt:console.log(this.renderer.info);break;case yt:(e.ctrlKey||e.metaKey)&&(console.log("SAVE",this.getGeometries().map((function(e){return e.toJSON()}))),e.preventDefault());break;case pt:case ct:case ut:case st:break;default:console.log(e.code)}}},{key:"onKeyUp",value:function(e){e.ctrlKey||e.metaKey||this.magicGuideLine.setOrientation()}},{key:"changeTool",value:function(e){this.selectController.cancelCurrentActions(this.currentGeometries),this.currentTool=e,pn(this.currentPosition,e),Nn(this.currentPosition,e)}},{key:"callFunctionForSelection",value:function(e,t){this.currentTool===bt.select&&this.selectController[e]&&this.selectController[e](t,this.currentGeometries)}},{key:"callFunctionPrimaryForCurrentGeometries",value:function(e,t){if(this.currentGeometries.length)return this.callFunctionForCurrentGeometries(e,t);this.callFunctionForCurrentRepresentationType(e,t)}},{key:"callFunctionForCurrentGeometries",value:function(e,t){for(var n=!1,r=this.currentGeometries.length-1;r>=0;r--){var i=this.currentGeometries[r],o=this.representationController.get(i.representationType);o[e]&&(n|=o[e](t,i,this.currentGeometries))}return n}},{key:"callFunctionForCurrentRepresentationType",value:function(e,t){var n=this.representationController.get(this.currentTool);n&&n[e]&&n[e](t,null,this.currentGeometries)}},{key:"callFunctionForAllRepresentationTypes",value:function(e,t){var n=this;this.representationController.forEach((function(r,i){i&&i[e]&&n.currentGeometries.includes(r)&&i[e](t,null,n.currentGeometries)}))}},{key:"updateCamera",value:function(){this.camera.zoom!==this.lastCameraZoom&&(this.updateGeometryScale(this.camera.zoom),this.lastCameraZoom=this.camera.zoom)}},{key:"updateGeometryScale",value:function(e){var t=3/(e<Cr.minZoomLevel?e>Cr.maxZoomLevel?e:Cr.maxZoomLevel:Cr.minZoomLevel);this.getGeometries().forEach((function(e){e.updateScale(t)})),this.magicGuideLine.updateScale(t),this.previewVertex.updateScale(t),this.previewStamp.updateScale(t)}},{key:"getCurrentPosition",value:function(){return this.currentPosition.clone()}},{key:"getMouseDeltaMovement",value:function(){return new ce.u(this.currentPosition.x-this.lastPosition.x,this.currentPosition.y-this.lastPosition.y)}},{key:"storeCurrentPosition",value:function(e){var t=this.mount.current,n=t.clientWidth,r=t.clientHeight,i=t.offsetTop,o=t.offsetLeft,a=(e.clientX-o)/n*2-1,s=-((e.clientY-i)/r*2-1);this.raycaster.setFromCamera(new ce.u(a,s),this.camera);var c=this.raycaster.intersectObject(this.catchPlane);c.length&&(this.lastPosition=this.currentPosition.clone(),this.currentPosition.x=c[0].point.x,this.currentPosition.y=c[0].point.y)}},{key:"getRaycastHitObjectForGeometryByGeometryTypes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getRaycastHitObjectByAttribute("geometryType",t,[e],n)}},{key:"getRaycastHitObjectByGeometryTypes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.getRaycastHitObjectByAttribute("geometryType",e,this.getGeometries(),t)}},{key:"getRaycastHitObjectByRepresentationTypes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.getRaycastHitObjectByAttribute("representationType",e,this.getGeometries(),t)}},{key:"getRaycastHitObjectsByRepresentationTypes",value:function(e,t){return this.getRaycastHitObjectByAttribute("representationType",e,this.getGeometries(),t,!0)}},{key:"getRaycastHitObjectByRepresentationTypesAndGeometryType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return this.getRaycastHitObjectByAttribute("geometryType",t,this.getGeometriesByRepresentationTypes(e),n,!1,r)}},{key:"getRaycastHitObjectByAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getGeometries(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=this.raycaster.intersectObjects(n,!0),s=null,c=[];if(a.length)for(var u=0;u<a.length;u++){for(s=a[u].object;s&&!t.includes(s[e]);)s=r.includes(s.geometryType)?null:s.parent;if(s&&!o.includes(s)&&(!s.getGeometry||!o.includes(s.getGeometry()))){if(!i)return s;c.includes(s)||c.push(s)}}return i?c:null}},{key:"getGeometries",value:function(){return Array.from(this.representationGroups.values()).map((function(e){return e.children})).flat()}},{key:"getGeometryByUuid",value:function(e){return this.getGeometries().find((function(t){return t.uuid===e}))}},{key:"getEdgeByUuid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getGeometries();return t.map((function(t){return t.edgeGroup.findEdgeByUuid(e)})).find((function(e){return e}))}},{key:"getVertexByUuid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getGeometries();return t.map((function(t){return t.vertexGroup.findVertexByUuid(e)})).find((function(e){return e}))}},{key:"getGeometriesByRepresentationType",value:function(e){return this.getGeometriesByRepresentationTypes([e])}},{key:"getGeometriesByRepresentationTypes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){n=n.concat(e.representationGroups.get(t).children)})),n}},{key:"getAllVertices",value:function(){return this.getGeometries().map((function(e){return e.getVertices()})).flat()}},{key:"getAllVerticesPositions",value:function(){return this.getGeometries().map((function(e){return e.getVerticesPositions()})).flat()}},{key:"getAllEdges",value:function(){return this.getGeometries().map((function(e){return e.getEdges()})).flat()}},{key:"setGeometries",value:function(e){var t=this;e.forEach((function(e){var n=e.representationType,r=t.representationGroups.get(e.representationType);if(r){var i=e.properties,o=br(n,r,e.properties);if(i.referenceEdge&&o.setReferenceEdge){var a=t.getEdgeByUuid(i.referenceEdge);o.setReferenceEdge(a)}if(i.referenceVertex&&o.setReferenceVertex){var s=t.getVertexByUuid(i.referenceVertex);o.setReferenceVertex(s)}o.fromJSON(e)}else alert("RepresentationType: "+n+" is not supported in this configuration\nAdd RepresentationType to the constructor")})),this.updateGeometryScale(this.camera.zoom)}},{key:"resetCamera",value:function(){this.camera.position.set(0,0),this.camera.zoom=Cr.resetZoomLevel,this.orbitControls.target.x=0,this.orbitControls.target.y=0,this.orbitControls.update(),this.camera.updateProjectionMatrix()}}]),e}(),Cr={minZoomLevel:3,resetZoomLevel:1.5,maxZoomLevel:1},Er=[{uuid:"042A2EC8-712B-4334-977C-0897F2546CDA",geometryType:zt,representationType:bt.outline,vertices:[{uuid:"142A2EC8-712B-4334-977C-0897F2546CDA",x:-2,y:-2,z:0},{uuid:"242A2EC8-712B-4334-977C-0897F2546CDA",x:4,y:-2,z:0},{uuid:"342A2EC8-712B-4334-977C-0897F2546CDA",x:3,y:1,z:0},{uuid:"442A2EC8-712B-4334-977C-0897F2546CDA",x:-2,y:2,z:0}],edges:[{uuid:"112A2EC8-712B-4334-977C-0897F2546CDA",startVertex:"142A2EC8-712B-4334-977C-0897F2546CDA",endVertex:"242A2EC8-712B-4334-977C-0897F2546CDA"},{uuid:"122A2EC8-712B-4334-977C-0897F2546CDA",startVertex:"242A2EC8-712B-4334-977C-0897F2546CDA",endVertex:"342A2EC8-712B-4334-977C-0897F2546CDA"},{uuid:"132A2EC8-712B-4334-977C-0897F2546CDA",startVertex:"342A2EC8-712B-4334-977C-0897F2546CDA",endVertex:"442A2EC8-712B-4334-977C-0897F2546CDA"},{uuid:"142A2EC8-712B-4334-977C-0897F2546CDA",startVertex:"442A2EC8-712B-4334-977C-0897F2546CDA",endVertex:"142A2EC8-712B-4334-977C-0897F2546CDA"}],isValidate:!1,errors:[],properties:{offsetLeft:0,offsetRight:.4}},{uuid:"042B2EC8-712B-4334-977C-0897F2546CDA",geometryType:zt,representationType:bt.outline,vertices:[{uuid:"142B2EC8-712B-4334-977C-0897F2546CDA",x:-8,y:-2,z:0},{uuid:"242B2EC8-712B-4334-977C-0897F2546CDA",x:-4,y:-2,z:0},{uuid:"342B2EC8-712B-4334-977C-0897F2546CDA",x:-4,y:2,z:0},{uuid:"442B2EC8-712B-4334-977C-0897F2546CDA",x:-8,y:2,z:0}],edges:[{uuid:"112B2EC8-712B-4334-977C-0897F2546CDA",startVertex:"142B2EC8-712B-4334-977C-0897F2546CDA",endVertex:"242B2EC8-712B-4334-977C-0897F2546CDA"},{uuid:"122B2EC8-712B-4334-977C-0897F2546CDA",startVertex:"242B2EC8-712B-4334-977C-0897F2546CDA",endVertex:"342B2EC8-712B-4334-977C-0897F2546CDA"},{uuid:"132B2EC8-712B-4334-977C-0897F2546CDA",startVertex:"342B2EC8-712B-4334-977C-0897F2546CDA",endVertex:"442B2EC8-712B-4334-977C-0897F2546CDA"},{uuid:"142B2EC8-712B-4334-977C-0897F2546CDA",startVertex:"442B2EC8-712B-4334-977C-0897F2546CDA",endVertex:"142B2EC8-712B-4334-977C-0897F2546CDA"}],isValidate:!1,errors:[],properties:{offsetLeft:.4,offsetRight:0}},{uuid:"92CDD2E0-DAEC-450D-BB12-3E93F0E82EE6",geometryType:It,representationType:bt.wall,vertices:[{uuid:"3148DBBB-7CBB-4425-9043-AD76896FA396",x:-5.877327508148702,y:2,z:0},{uuid:"E7622618-978A-4AF1-AF8C-EC9EF3490196",x:-5.877327508148702,y:-.586582588875898,z:0},{uuid:"FF970975-5EAD-4F82-9743-0C7BDBE8DA94",x:-4,y:-.586582588875898,z:0}],isValidate:!1,edges:[{uuid:"672E540D-83B6-4D31-921F-45D5665B8757",startVertex:"3148DBBB-7CBB-4425-9043-AD76896FA396",endVertex:"E7622618-978A-4AF1-AF8C-EC9EF3490196"},{uuid:"82551481-89EB-4CC3-AB8D-C6C2371744C3",startVertex:"E7622618-978A-4AF1-AF8C-EC9EF3490196",endVertex:"FF970975-5EAD-4F82-9743-0C7BDBE8DA94"}],errors:[],properties:{offsetLeft:.2,offsetRight:0}},{uuid:"48E174DA-9891-4D06-B8DE-20805813322A",geometryType:Ut,representationType:bt.door,isValidate:!1,errors:[],properties:{referenceEdge:"112A2EC8-712B-4334-977C-0897F2546CDA",referenceVertex:"142A2EC8-712B-4334-977C-0897F2546CDA",relative:.6336898068198362,width:1}},{uuid:"41DCF9F4-01F9-4A07-ACD9-F059FE32EF1C",geometryType:Ut,representationType:bt.door,isValidate:!1,errors:[],properties:{referenceEdge:"112A2EC8-712B-4334-977C-0897F2546CDA",referenceVertex:"142A2EC8-712B-4334-977C-0897F2546CDA",absolute:1.0504649268300206,width:1}}];var Ar=Object(T.a)((function(e){return{floorPlaner:{width:"100%",height:"100%"},canvasContaienr:{width:"100%",height:"100%"}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),i=Object(r.useRef)(null),o=e.classes;return Object(r.useEffect)((function(){var e=Ue(t),r=e.scene,o=e.camera,a=e.raycaster,s=e.orbitControls,c=e.renderer,u=e.frameId;n.current=c,i.current=o;var l=new kr(t,r,o,a,s,[bt.outline,bt.wall,bt.door,bt.window,bt.graph],c);l.setGeometries(Er);var h=l.mount.current;return function(){l.deconstructor(h),He(h,c,u)}}),[n,i]),Object(F.jsx)(se.a,{bounds:!0,onResize:function(){ue(t,n.current,i.current)},children:function(e){var n=e.measureRef;return Object(F.jsx)("div",{className:o.floorPlaner,ref:n,children:Object(F.jsx)("div",{className:o.canvasContaienr,ref:t,tabIndex:0})})}})})),Vr=["classes","t"];var Gr=Object(s.c)(Object(T.a)((function(e){return{root:{minHeight:"100%"}}})),Object(G.a)())((function(e){var t=e.classes;return e.t,Object(V.a)(e,Vr),Object(F.jsx)(ae,{spreadsheetExpandable:!0,expandedContent:Object(F.jsx)("div",{}),children:Object(F.jsx)("div",{className:t.root,children:Object(F.jsx)(Ar,{})})})})),Tr=["classes","t"];var Dr=Object(s.c)(Object(T.a)((function(e){return{root:{height:"100vh"}}})),Object(G.a)())((function(e){var t=e.classes;return e.t,Object(V.a)(e,Tr),Object(F.jsx)(ae,{spreadsheetExpandable:!0,children:Object(F.jsx)("div",{className:t.root})})})),Mr="/foto",Fr="/mapping",Lr="/window";var Pr=function(e){return Object(F.jsx)("svg",Object(c.a)(Object(c.a)({width:32,height:32,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(F.jsx)("path",{d:"M13 23l-7-7 7-7m-7 7h20",stroke:"#333",strokeWidth:2,fill:"none",fillRule:"evenodd"})}))};var Rr=Object(s.c)(Object(T.a)((function(e){return{root:{display:"flex",margin:"auto 0",alignSelf:"flex-start",alignItems:"center",cursor:"pointer"},icon:{marginRight:"5px",width:"32px",height:"32px"}}})),Object(G.a)())((function(e){var t=e.classes,n=e.t,r=e.backLabel,i=e.onNavigateBack,o=e.className;return Object(F.jsxs)("div",{className:Object(M.a)(t.root,o),onClick:i,children:[Object(F.jsx)(Pr,{className:t.icon}),Object(F.jsx)(N.a,{variant:"h6",children:r||n("back")})]})}));var Sr=function(e){return Object(F.jsx)("svg",Object(c.a)(Object(c.a)({width:32,height:32,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(F.jsx)("path",{d:"M10 16h16M6 10h20M14 22h12",stroke:"#333",strokeWidth:2,fill:"none",fillRule:"evenodd"})}))},Br=["classes","title","backLabel","onNavigateBack","className"];var Nr=Object(T.a)((function(e){return{root:{display:"flex",alignItems:"center"},flexItem:{flex:"1 1 0px"},burgerIcon:{display:"flex",justifyContent:"flex-end"},title:{display:"flex",justifyContent:"center"}}}))((function(e){var t=e.classes,n=e.title,r=e.backLabel,i=e.onNavigateBack,o=e.className;return Object(V.a)(e,Br),Object(F.jsxs)("div",{className:Object(M.a)(t.root,o),children:[Object(F.jsx)(Rr,{backLabel:r,onNavigateBack:i,className:t.flexItem}),Object(F.jsx)(N.a,{variant:"h2",className:Object(M.a)(t.flexItem,t.title),children:n}),Object(F.jsx)("div",{className:"".concat(t.flexItem," ").concat(t.burgerIcon),children:Object(F.jsx)(Sr,{})})]})})),zr=["classes","t","title","text"];var Ir=Object(s.c)(Object(T.a)((function(e){return{root:{paddingTop:"10px",boxSizing:"border-box",height:e.skeleton.appBar.heightExpandedContent},title:{}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.title),r=e.text;return Object(V.a)(e,zr),Object(F.jsxs)("div",{className:Object(M.a)(t.root),children:[Object(F.jsx)(N.a,{className:t.title,variant:"h1",children:n}),Object(F.jsx)(N.a,{variant:"h6",children:r})]})}));var Ur=function(e){return Object(F.jsx)("svg",Object(c.a)(Object(c.a)({width:32,height:32,xmlns:"http://www.w3.org/2000/svg"},e),{},{children:Object(F.jsx)("path",{d:"M23 12.5l-7 7-7-7",stroke:"#333",strokeWidth:2,fill:"none"})}))},Hr=n(121),Zr=n(122),Kr=["classes","t","active","label","onClick"];var Wr=Object(s.c)(Object(T.a)((function(e){return{root:{height:"25px",backgroundColor:e.colors.palette.corporate.yellowMain,color:e.palette.text.primary,"&:active":{backgroundColor:e.colors.palette.corporate.yellowMain},"&:hover":{backgroundColor:e.colors.palette.corporate.yellowDark},"&:focus":{backgroundColor:e.colors.palette.corporate.yellowDark}},active:{backgroundColor:e.colors.palette.corporate.yellowDark,"& .MuiChip-label":{fontFamily:e.typography.h2.fontFamily}}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.active),r=e.label,i=e.onClick;return Object(V.a)(e,Kr),Object(F.jsx)(Zr.a,{className:Object(M.a)(t.root,n?t.active:""),label:r,onClick:i})})),Yr=["classes","t"];var Xr=Object(s.c)(Object(T.a)((function(e){return{root:{},menuItem:{cursor:"pointer"}}})),Object(G.a)())((function(e){var t=e.classes,n=e.t,i=(Object(V.a)(e,Yr),Object(x.f)()),o=Object(r.useState)(2),a=Object(D.a)(o,2),s=a[0],c=a[1];function u(e,t){c(e),function(e){i.push(e)}(t)}return Object(F.jsx)("div",{className:t.root,children:Object(F.jsxs)(Hr.a,{"aria-label":"breadcrumb",children:[Object(F.jsx)(Wr,{active:0===s,label:n("foto"),onClick:function(){return u(0,Mr)}}),Object(F.jsx)(Wr,{active:1===s,label:n("mapping"),onClick:function(){return u(1,Fr)}}),Object(F.jsx)(Wr,{active:2===s,label:n("window"),onClick:function(){return u(2,Lr)}})]})})})),Jr=["classes","t","title","contentTitle","contentDescription"];var _r=Object(s.c)(Object(T.a)((function(e){return{root:{minHeight:e.skeleton.appBar.height,background:e.colors.palette.corporate.yellowMain,padding:e.skeleton.appBar.padding,borderRadius:"0 0 0 30px",boxSizing:"border-box",position:"absolute",width:"100vw"},title:{marginTop:"28px"},actions:{display:"flex",alignItems:"center"}}})),Object(G.a)())((function(e){var t=e.classes,n=(e.t,e.title),r=e.contentTitle,i=e.contentDescription;return Object(V.a)(e,Jr),Object(F.jsxs)("div",{className:Object(M.a)(t.root),children:[Object(F.jsx)(Nr,{onNavigateBack:function(){return console.log("Back")},backLabel:"Zur\xfcck",title:n}),Object(F.jsx)(R,{clickElement:Object(F.jsx)(Ur,{className:Object(M.a)(t.icon)}),additionalElement:Object(F.jsx)(Xr,{}),children:Object(F.jsx)(Ir,{title:r,text:i})})]})})),qr=["classes","t"];var Qr=Object(s.c)(Object(T.a)({appContainer:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"},content:{height:"100vh"}}),Object(G.a)())((function(e){var t=e.classes,n=e.t,r=Object(V.a)(e,qr);return Object(F.jsxs)("div",{className:t.appContainer,children:[Object(F.jsx)(_r,{title:"Headline",contentTitle:function(){switch(r.location.pathname){case Mr:return n("foto");case Fr:return n("mapping");case Lr:return n("window");default:return n("headline")}}(),contentDescription:"Beschreibungstext, Beschreibungstext, Beschreibungstext, Beschreibungstext"}),Object(F.jsx)("div",{className:t.content,children:Object(F.jsxs)(x.c,{children:[Object(F.jsx)(x.a,{path:Mr,component:Gr}),Object(F.jsx)(x.a,{path:Fr,component:Dr}),Object(F.jsx)(x.a,{path:Lr,component:Gr}),Object(F.jsx)(x.a,{path:"/",component:Gr})]})})]})}));var $r=function(){return Object(F.jsx)(y.a,{store:g,children:Object(F.jsx)(b.a,{theme:A,children:Object(F.jsx)(m.a,{children:Object(F.jsx)(x.c,{children:Object(F.jsx)(x.a,{component:Qr})})})})})};n(96);a.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)($r,{})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.36fe62d0.chunk.js.map